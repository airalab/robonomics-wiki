{"hash":"c4efcd02f56a9fa405dae8422eae3b46f45234bd","data":{"doc":{"id":"549974e4f78f3a0ea28ea6ffbf8f17c6","title":"Recevez une notification lorsque la porte s'ouvre","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[{"depth":2,"value":"Notifications du bot Telegram","anchor":"#notifications-du-bot-telegram"},{"depth":2,"value":"Notification d'ouverture de porte","anchor":"#notification-douverture-de-porte"}],"content":"\nDans cet article, vous installerez l'intégration du bot de notification Telegram et configurerez une automatisation qui enverra une notification à votre compte Telegram lorsque la porte est ouverte.\n\n## Notifications du bot Telegram\n\nTout d'abord, vous devez créer un bot Telegram personnel. Pour cela, allez sur le [bot Telegram spécial @BotFather](https://t.me/botfather) et suivez les instructions. \nEnregistrez votre jeton pour accéder à l'API HTTP.\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/bot-father.mp4\" />\n\n<robo-wiki-note type=\"warning\">\n\nGardez votre jeton **en sécurité** et stockez-le **en toute sécurité**, il peut être utilisé par n'importe qui pour contrôler votre bot. \n\n</robo-wiki-note>\n\nL'étape suivante consiste à trouver votre ***User Chat ID***. Pour cela, utilisez le [GetIdsBot](https://t.me/getidsbot). \n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/get-id-bot.mp4\" />\n\nMaintenant, installons l'intégration \"Telegram broadcast\". Cette intégration enverra des messages à votre Telegram.\n\nPour l'image préinstallée Robonomics, Docker Home Assistant ou Home Assistant Core, vous devez modifier `configuration.yaml`. Connexionez-vous à votre Raspberry Pi via `ssh`:\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/open-config.mp4\" />\n\n<code-helper additionalLine=\"rasppi_username@rasppi_hostname\" >\n\n```shell\nsudo -u homeassistant -H -s\ncd\ncd .homeassistant \nnano configuration.yaml\n```\n\n</code-helper >\n\nCollez les lignes suivantes à la fin du fichier. Insérez votre **bot API key** et **your User Chat ID**. Créez également un nom pour votre service de notification:\n\n\n<code-helper copy >\n\n```shell\ntelegram_bot:\n  - platform: broadcast\n    api_key: <YOUR_API_KEY>\n    allowed_chat_ids:\n      -  <YOUR_USER_CHAT_ID> # 123456789  example id of a user\n      \nnotify:\n  - platform: telegram\n    name: <NOTIFIER_NAME>\n    chat_id: <YOUR_USER_CHAT_ID>\n```\n\n</code-helper >\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/insert-config.mp4\" />\n\n**Enregistrez la configuration et rechargez Home Assistant.**\n\n\nEn conséquence, un service sera créé dans votre service Home Assistant, qui enverra n'importe quel message au chat Telegram avec vous. \nVous pouvez le vérifier dans le menu Outils de développement de l'interface Web de Home Assistant. \n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/telegram-result.mp4\" />\n\n##  Notification d'ouverture de porte\n\nMaintenant, il est temps de créer une automatisation. Tout d'abord, importez le modèle dans votre Home Assistant à partir de ce lien:\n\n<code-helper copy>\n\n```shell\nhttps://github.com/airalab/home-assistant-blueprints/blob/main/door-opened-notifications/door-notifications.yaml\n```\n\n</code-helper >\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/insert-blue.mp4\" />\n\nEt créez une automatisation:\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/create-automation.mp4\" />\n\nMaintenant, vous recevrez un message du bot Telegram chaque fois que la porte est ouverte.\n\n<robo-wiki-note type=\"okay\">\nVous pouvez utiliser cette automatisation avec n'importe quelle porte/fenêtre de votre maison.\n</robo-wiki-note>\n\n","tools":["Home Assistant 2022.11.3 https://github.com/home-assistant/core"],"fileInfo":{"path":"fr/door-notification.md","name":"door-notification"}}},"context":{}}