{"hash":"42a595bbfbef7d052ed6191b2aff671f9819712a","data":{"doc":{"id":"e4107983ffd13da7cd43fd92628d8166","title":"Zigbee Adapter with Zigbee2MQTT Addon for Home Assistant OS","description":"","contributors":["Fingerling42"],"headings":[],"subtitles":[{"depth":2,"value":"Zigbee2MQTT Addon Install","anchor":"#zigbee2mqtt-addon-install"},{"depth":2,"value":"Configuration and Run","anchor":"#configuration-and-run"},{"depth":2,"value":"Pairing Device","anchor":"#pairing-device"}],"content":"\n**In this article you will set up your Zigbee adapter for Home Assistant OS.**\n\n<robo-wiki-picture src=\"home-assistant/zigbee2mqtt.png\" />\n\n**If you have the [JetHome USB JetStick Z2](https://jethome.ru/z2/?sl=en) (which has all of the necessary firmware), you can simply proceed with these instructions. However, if you have another adapter, the first thing you need to do is to flash it with Zigbee2MQTT software. You can find instructions for your device [here](https://www.zigbee2mqtt.io/information/supported_adapters.html).**\n\n## Zigbee2MQTT Addon Install\n\n1. Go to the Add-on store, click ⋮ on the upper right corner and choose `Repositories`. Paste there the following link and press `ADD`:\n```\nhttps://github.com/zigbee2mqtt/hassio-zigbee2mqtt\n```\n2. Close the repository manager and refresh the page. Find `Zigbee2MQTT` addon and `INSTAL` it (do not confuse with Zigbee2MQTT Edge).\n\n## Configuration and Run\n\n1. Connect the Zigbee adapter to Raspberry Pi.\n\n<robo-wiki-picture src=\"home-assistant/connect-stick.gif\" />\n\n2. Find the location of the adapter. For this open SSH Add-on and run the following command:\n\n<code-helper copy additionalLine=\"Home Assistant Command Line\">\n\n```bash\nha hardware info\n```\n\n</code-helper>\n\nIn output find the strings like this:\n\n<code-helper additionalLine=\"Home Assistant Command Line\">\n\n```bash\n- attributes:\n    DEVLINKS: /dev/serial/by-id/usb-Silicon_Labs_CP2102_USB_to_UART_Bridge_Controller_0001-if00-port0\n       /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.1:1.0-port0\n    DEVNAME: /dev/ttyUSB0\n    DEVPATH: /devices/platform/scb/fd500000.pcie/pci0000:00/0000:00:00.0/0000:01:00.0/usb1/1-1/1-1.1/1-1.1:1.0/ttyUSB0/tty/ttyUSB0\n    ID_BUS: usb\n    ID_MODEL: CP2102_USB_to_UART_Bridge_Controller\n    ID_MODEL_ENC: CP2102\\x20USB\\x20to\\x20UART\\x20Bridge\\x20Controller\n    ID_MODEL_ID: ea60\n    ID_PATH: platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.1:1.0\n    ID_PATH_TAG: platform-fd500000_pcie-pci-0000_01_00_0-usb-0_1_1_1_0\n    ID_REVISION: \"0100\"\n    ID_SERIAL: Silicon_Labs_CP2102_USB_to_UART_Bridge_Controller_0001\n    ID_SERIAL_SHORT: \"0001\"\n    ID_TYPE: generic\n    ID_USB_DRIVER: cp210x\n    ID_USB_INTERFACE_NUM: \"00\"\n    ID_USB_INTERFACES: ':ff0000:'\n    ID_VENDOR: Silicon_Labs\n    ID_VENDOR_ENC: Silicon\\x20Labs\n    ID_VENDOR_ID: 10c4\n    MAJOR: \"188\"\n    MINOR: \"0\"\n    SUBSYSTEM: tty\n    TAGS: ':systemd:'\n    USEC_INITIALIZED: \"10937474053\"\nby_id: /dev/serial/by-id/usb-Silicon_Labs_CP2102_USB_to_UART_Bridge_Controller_0001-if00-port0\nchildren: []\ndev_path: /dev/ttyUSB0\nname: ttyUSB0\nsubsystem: tty\nsysfs: /sys/devices/platform/scb/fd500000.pcie/pci0000:00/0000:00:00.0/0000:01:00.0/usb1/1-1/1-1.1/1-1.1:1.0/ttyUSB0/tty/ttyUSB0\n```\n\n</code-helper>\n\nIn this example device connection directory is `/dev/ttyUSB0`.\n\n3. Before starting Zigbee2MQTT you need to configure it. Click on `Configuration` in the Zigbee2MQTT addon. The basic options needs a few adjustments, change the following statements:\n\n<robo-wiki-picture src=\"home-assistant/hassos-zigbee2mqtt-config.png\" />\n\n- In `serial` field add the device connection directory:\n\n<code-helper copy>\n\n```yaml\nport: /dev/ttyUSB0\n```\n\n</code-helper>\n\n- Leave `mqtt` field **empty when using the Mosquitto** broker addon, otherwise add in your MQTT details in the [proper format](https://www.zigbee2mqtt.io/guide/configuration/mqtt.html#server-connection).\n\n4. Start the addon by going to `Info` and click `START`.\n\n5. Wait till Zigbee2MQTT starts and press `OPEN WEB UI` to verify Zigbee2MQTT started correctly.\n\n<robo-wiki-note type=\"warning\">\n\n  If you already have an active Zigbee adapter or gateway in your home, and you are now configuring another adapter, then they will conflict with each other. To solve this problem you need to change the channel on the new device.\n\n  To do that you need to open Zigbee2MQTT Web UI, go to `Settings` → `Advanced` and change `ZigBee channel` field.\n\n  You also will need to delete `coordinator_backup.json` to refresh channel on the adapter. To do this, open the SSH Add-on and find location of the zigbee2mqtt config and after that, restart Zigbee2MQTT addon:\n\n</robo-wiki-note>\n\n<code-helper additionalLine=\"Home Assistant Command Line\">\n\n```bash\ncd config/zigbee2mqtt\nrm coordinator_backup.json\n```\n\n</code-helper>\n\n## Pairing Device\n\n1. Open Zigbee2MQTT Web UI and click on the `Permit join` button.\n\n2. The most common way to switch a device to connect mode is to hold its power button or switch them on/off 5 times.\n\n<robo-wiki-picture src=\"home-assistant/switch-device.gif\" />\n\n3. When the device connects, you should see the it in the Zigbee2MQTT Web UI.\n\n<robo-wiki-picture src=\"home-assistant/zigbee-2-mqtt-addon-ui.png\" />\n\n4. Now you should see the device with the same IEEE Address in your Home Assistant Web UI. Go to `Settings` -> `Devices & Services` -> `Devices`.\n\nNow you can go to the [**IoT Subscription**](/docs/sub-activate) section and start activating the Robonomics subscription.","tools":["Home Assistant OS 64-9.5 for RaspPi https://github.com/home-assistant/operating-system","Zigbee2MQTT Home Assistant Addon 1.30.2-1 https://github.com/zigbee2mqtt/hassio-zigbee2mqtt"],"fileInfo":{"path":"zigbee-to-mqtt-hassos.md","name":"zigbee-to-mqtt-hassos"}}},"context":{}}