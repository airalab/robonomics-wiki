{"hash":"17ae70ace5c127d7566de96c625c1a5e5abab879","data":{"doc":{"id":"c2ea02c5a5eabf03adb640a0a639e1dc","title":"Energy Monitoring","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[],"content":"This article will show you the process of setting up the Energy Monitoring.\n\n<robo-wiki-note type=\"warning\">  \n\nAll devices from Robonomics can be purchased on the official [website](https://robonomics.network/devices/).\n\n</robo-wiki-note>\n\n<robo-wiki-video autoplay loop controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmTNyEP12NA7PPjw5WJBwyGwMq9Pg3YHmgEeaFRgNaS5Lc', type:'mp4'}]\" />\n\n<robo-wiki-title :type=\"2\" anchor=\"step1\">\nStep 1 — Flashing\n</robo-wiki-title>\n\n<robo-wiki-note type=\"warning\">  \n\nAll devices from Robonomics come pre-flashed out of the box. However, since all devices are development kits, the instructions will cover the option of flashing the device from scratch. If you do not wish to do this now, proceed to [**Step 2 - Access Point**](/docs/ir-controller/#step2).\n\n</robo-wiki-note>\n\nTake the device from the box and connect it to the computer. Then go to the website [webflasher.robonomics.network](https://webflasher.robonomics.network/). This is the web flasher.\n\n<robo-wiki-video autoplay loop controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmapJYTMqxVSzavJmWJg3rQjRoyCtdeFzYifgvDkXdzi8S', type:'mp4'}]\" />\n\n<robo-wiki-note type=\"warning\"> Note! Web flasher is working only with Google Chrome or Microsoft Edge browser.</robo-wiki-note>\n\nIn \"Firmware\" drop-box choose **\"ENERGY MONITOR\"** option and next in \"SELECT CHIP\" choose **\"ESP32-S3\"**. Press **\"CONNECT\"** button.\nA popup window will appear where you should select the serial port to which the device is connected (usually it's `/ttyUSB0`). Then choose **\"INSTALL ENERGY-MONITOR_EN\"**. \nOn next window, you can make **CLEAR INSTALLATION** by check **ERASE DEVICE**. Press Next and then Install. Wait until firmware to upload to Energy Monitoring device.\n\nAfter finishing the installation process Wi-Fi configuration popup will appear. Provide Wi-Fi credentials.\n\nAfter setting up Wi-Fi you can visit device via **VISIT DEVICE** button. Later you can visit device via it's IP address in the network. To find it you can use [Fing mobile app](https://www.fing.com/products) or \n[nmap CLI tool](https://vitux.com/find-devices-connected-to-your-network-with-nmap/).\n\nSkip **Step 2 — Access Point** and go to [**Step 3 — Configuration**](/docs/ir-controller/#step3).\n\n<robo-wiki-title :type=\"2\" anchor=\"step2\">\nStep 2 — Access Point\n</robo-wiki-title>\n\nIf you take Energy monitor from the box and connect it to the power supply, it will create hotspot with name \"robonomics-XXXXXXX\". Connect to it. Configuration window should open. If not, open web-browser and go to `192.168.4.1` page.\n\n<robo-wiki-picture src=\"ir-controller/phone-wifi.jpg\" />\n\nProvide Wi-Fi credentials. After that, the Energy Monitoring device will connect to the Wi-Fi network. Check the device via it's IP address in the network. To find it you can use [Fing mobile app](https://www.fing.com/products) or \n[nmap CLI tool](https://vitux.com/find-devices-connected-to-your-network-with-nmap/).\n\n<robo-wiki-title :type=\"2\" anchor=\"step3\">\nStep 3 — Configuration\n</robo-wiki-title>\n\n<robo-wiki-video autoplay loop controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmZokF8TnReLt4B6q8ixkBmpZwpiiU9PQCPdyJw9RcnYFn', type:'mp4'}]\" />\n\nGo to **\"Configuration\"**->**\"Configure other\"**. In **\"Template\"** string insert next:\n\n<code-helper copy>\n\n```shell\n{\"NAME\":\"Robonomics-Energy-Monitor\",\"GPIO\":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3200,5440,1,1,576,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],\"FLAG\":0,\"BASE\":1, \"CMND\":\"SetOption21 1|WattRes 2|VoltRes 2\"}\n```\n</code-helper>\n\nVerify that checkbox **\"Activate\"** and **\"MQTT Enable\"** is enabled. If not, enable it and press Save button.\n\nReturn to \"main menu\" and go to **\"Configuration\"** -> **\"Configure MQTT\"**.\nProvide your MQTT credentials here:\n\n<robo-wiki-picture src=\"ir-controller/mqtt.jpg\" />\n\nThat's all with ESP for now. The next step is to install the Home Assistant integration.\n\n<robo-wiki-title :type=\"2\" anchor=\"step4\">\nStep 4 — Integration setup\n</robo-wiki-title>\n\nThis article assumes, that you have Home Assistant. To connect Energy Monitoring device to Home Assistant, you need to install \"Tasmota\" integration.\n\n<robo-wiki-video autoplay loop controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmXzAFkgV2ZR4pmedhjSCwh9JvfUkmmKUqtHDuzhb6CQaH', type:'mp4'}]\" />\n\nBasically, Home Assistant will discover \"Tasmota\" integration automatically. But if not, add it manually.\n\n<robo-wiki-picture src=\"energymeter/HA.jpg\" />\n\nThat's all. Now you can add energy entities to the dashboard.\n\n<robo-wiki-note type=\"warning\">  \n\nAll devices from Robonomics can be purchased on the official [website](https://robonomics.network/devices/).\n\n</robo-wiki-note>","tools":[],"fileInfo":{"path":"energy-monitoring.md","name":"energy-monitoring"}}},"context":{}}