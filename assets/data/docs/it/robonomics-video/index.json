{"hash":"8c97e94672e2f65db3959c4ea30cc2599941a27c","data":{"doc":{"id":"2b1c996be805300322f922775d70b2d9","title":"Servizio video Robonomics","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[{"depth":2,"value":"Collega la telecamera","anchor":"#collega-la-telecamera"},{"depth":3,"value":"Aggiungi al dashboard","anchor":"#aggiungi-al-dashboard"},{"depth":2,"value":"Controlla la cartella dei media","anchor":"#controlla-la-cartella-dei-media"},{"depth":2,"value":"Chiamata di servizio","anchor":"#chiamata-di-servizio"},{"depth":2,"value":"DAPP","anchor":"#dapp"}],"content":"\nQuesto articolo mostra come aggiungere una telecamera IP a Home Assistant e inviare video al servizio web Robonomics.\n\nPer collegare una telecamera a Home Assistant, è necessario conoscere il suo indirizzo IP e creare un account di telecamera locale per connettersi allo stream RTSP.\n\n<robo-wiki-note type=\"warning\">\nPoiché questo viene fatto in modo diverso per ogni telecamera, questo processo non è considerato in questo articolo.\n</robo-wiki-note>\n\nRequisiti:\n- Telecamera IP\n- Account di telecamera locale configurato\n- Indirizzo IP della telecamera\n- Home Assistant configurato\n\n<robo-wiki-note type=\"note\">\n\nQuesto articolo assume che tu abbia una telecamera IP generale senza opzioni RTZ (ruota, inclina, zoom). \nSe hai una telecamera RTZ, controlla l'articolo \"Telecamera RTZ\". E poi torna al secondo passaggio qui.\n\n</robo-wiki-note>\n\n## Collega la telecamera\n\nInnanzitutto, devi trovare l'URL per lo streaming RTSP della telecamera.\nPer farlo, prova a inserire la seguente query su Internet: \"<NOME_TELECAMERA> flusso RTSP\".\nL'URL dello stream deve iniziare con `rtsp://<INDIRIZZO_IP>...`. \n\nQuesto articolo utilizza una telecamera \"Tapo\" e il percorso dello stream è `rtsp://<INDIRIZZO_IP>/stream1`.\n\nApri Home Assistant e vai su \"Settings\"-> \"Devices & Services\". Premi il pulsante \"ADD INTEGRATION\" e\ninizia a digitare \"Generic Camera\". Sceglila.\n\n <robo-wiki-picture src=\"home-assistant/generic.jpg\" />\n\nNella finestra di configurazione fornisci le seguenti informazioni:\n- Stream Source URL - L'URL dello stream RTSP della telecamera\n- Username - scrivi un nome utente del tuo account di telecamera locale\n- Password - scrivi una password per il tuo account di telecamera locale\n\n<robo-wiki-picture src=\"home-assistant/genericconf.jpg\" />\n\nScorri verso il basso le impostazioni e premi il pulsante \"Submit\".\n\nNella finestra di anteprima attiva la casella di controllo \"This image looks good.\" e premi il pulsante \"Submit\". Poi - \"Finish\".\n\n<robo-wiki-picture src=\"home-assistant/preview-camera.jpg\" />\n\n### Aggiungi al dashboard\n\nInoltre, puoi aggiungere lo stream al tuo dashboard. Per farlo, vai al dashboard e crea una nuova scheda \n\"Picture Glance\". Passaggi successivi:\n- inserisci il \"Title\" desiderato\n- elimina i dati da \"Image Path\"\n- seleziona the camera in \"Camera Entity\"\n- nella \"Camera View\", seleziona \"live\" in modo che ci sia meno ritardo\n\nE salvalo.\n<robo-wiki-picture src=\"home-assistant/camera_picture_glance.jpg\" />\n\n## Controlla la cartella dei media\n\nBefore being sent to the Robonomics Video Service, the video must be saved in a folder, and Home Assistant must have access to this folder. \nLa soluzione più semplice in questo caso è utilizzare un pacchetto multimediale, in cui Home Assistant memorizza tutti i media.\n\n- Se usi HAOS o un'immagine preinstallata, il tuo Home Assistant **ha già una cartella Media**.\n- Se usi Home Assistant Core, dovresti andare nella cartella `.homeassistant` e creare una cartella `media` al suo interno.\n- Se usi Home Assistant Docker, aggiungi la riga ` -v /PERCORSO_DEL_TUO_MEDIA:/media \\` al comando Docker.\n\nPer verificare che tutto sia stato configurato correttamente, vai alla scheda \"Media\" -> \"media locale\" nel tuo Home Assistant. \nDovresti vedere una cartella vuota (nessun errore):\n\n<robo-wiki-picture src=\"home-assistant/media-folder.jpg\" />\n\n## Chiamata di servizio\n\nPer inviare un video a Robonomics, devi chiamare un servizio dedicato in Home Assistant. \nIn questo articolo viene fatto manualmente, ma puoi crearne un'automazione.\n\nPer farlo, vai su  \"Developer tools\" -> \"Services\" e trova \"Robonomics: Save recording to Robonomics \".\n\n<robo-wiki-picture src=\"home-assistant/robonomics-service.jpg\" />\n\nIn \"Targets\" scegli l'entità della tua telecamera.\nIn \"Path to save the recording\" devi fornire un percorso assoluto alla cartella,\ndove Home Assistant può salvare il video:\n- Per immagine preinstallata - `/home/homeassistant/.homeassistant/media`;\n- Per HA OS o Home Assistant Docker- `/media`;\n- Per Home Assistant Core - Percorso alla cartella dei media precedentemente creata.\n\nInoltre, puoi scegliere la Durata della registrazione. \n\nCompila i dati e chiama il servizio con il pulsante \"CALL SERVICE\".\n\n## DAPP\n\nPer visualizzare il video risultante vai su [Robonomics DAPP](https://vol4tim.github.io/videostream/).\n\n<robo-wiki-picture src=\"home-assistant/video-dapp.jpg\" />\n\nIncolla l'indirizzo del tuo account del controller e clicca sul pulsante sottostante. Aspetta il processo \"Search for Twins\". \nCome risultato, otterrai un CID IPFS con tutti i video registrati.\n\n<robo-wiki-picture src=\"home-assistant/video-ipfs.jpg\" />\n\nSuccessivamente, seleziona l'account del controller (o un altro) dall'elenco a discesa e firma un messaggio per l'autorizzazione in\nil gateway Web3 IPFS per scaricare tutti i video. Come risultato, otterrai tutti i video registrati dalla tua smart home.\n\n<robo-wiki-picture src=\"home-assistant/show-videos.jpg\" />\n\nPoiché tutti i video nella cartella sono criptati con la chiave del controller, è necessario inserirla per decrittare i video.\nDopo ciò, il pulsante di riproduzione del video viene attivato. Cliccaci sopra per scaricare il video.\n\n<robo-wiki-picture src=\"home-assistant/video-seed.jpg\" />\n\n\n\n\n\n\n","tools":[],"fileInfo":{"path":"it/robonomics-video.md","name":"robonomics-video"}}},"context":{}}