{"hash":"e07834b7c9d5fbd855c8bb0eb62176355bee4599","data":{"doc":{"id":"014c142832f57f070a312aabee48621b","title":"Подключить марсоход Curiosity под управлением парачейна Робономики","description":"","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/connect-mars-curiosity-rover-under-robonomics-parachain-control.0b85c65.0fbc69f3fa2059b8e51b6bedbc56a0e5.png","size":{"width":1920,"height":1080},"sizes":"(max-width: 1920px) 100vw, 1920px","srcset":["/assets/static/connect-mars-curiosity-rover-under-robonomics-parachain-control.1b91758.0fbc69f3fa2059b8e51b6bedbc56a0e5.png 480w","/assets/static/connect-mars-curiosity-rover-under-robonomics-parachain-control.3df3210.0fbc69f3fa2059b8e51b6bedbc56a0e5.png 1024w","/assets/static/connect-mars-curiosity-rover-under-robonomics-parachain-control.0b85c65.0fbc69f3fa2059b8e51b6bedbc56a0e5.png 1920w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1920 1080' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-0b1c51fc380adbb9e677d422cce5720a'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-0b1c51fc380adbb9e677d422cce5720a)' width='1920' height='1080' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAYAAAA5DDySAAAACXBIWXMAAAsSAAALEgHS3X78AAAFLklEQVRo3u1YWVNURxTmJ6SMSR6SECSJ0YRUtqo85T/kLcmDWxWKCGEbGXYQAjrsW8REEgRBCCL7jiyCrLLEVEoF2Rlg2AYGWUa2mS992rnjBZVRBisTc7vqVN/ezu3%2b%2buvT57TVm/sOgGSvzUfY8%2b4HsLX7CguLi6Ck0%2bmwW0mv18MSk9UbbOEk%2bz758gkAKI2OjaNvYBDDylF03%2b%2bFcnQMg8MjmJyaRl//AMbGVVBNTqLf0GdYqYR6dtY4hto1mnmLBcHqdesP%2beK//f4wrA98BpuPv9gEQFZOLty9/fFbWgaOOjjj/MXfERQWjp/Co6GISUBgqAJ%2bwWHwOROK9KyrSPwlGfnFZTjpehohiihExv2MllsdXNfGxoblAbD3vf2wPvg57L7%2bBm/vt4MNA0MMwIOFBUxMTvEdp92cnJrC1PQMNPPzGFOpMKfRGNqnMD2jZm3TWFxcglo9ixlensHCwqLlMoCffwbCHsaE1955H7af/g9tAIHwlu3BJ2wATZpEpxNynbFOXNYZRL%2bNWDQDBHkaAK96kgCQAJAAkADYFoDdlp3oNWcupjZyWwDEfgApIU%2bO6oRc%2bBZEXObfhmtSnJ7Vf2NDx0XQKx4n9BWPF9qF/sa%2bhv%2bK%2b%2bwYAEpLS8sYV02YRbPV1dUducHkeW5a3BYd4rJ6dg4zavULO2AmAcjKyUNgmAKpV7JQc6MB5VU1yMkvQl1DI67X1uNSeiYKSsqQW1iC0ooqFJaW42peAf64lofK6lqoJiYREZeIiNhEJFy4iLKqamTnFiCvqASVNXUoKqvg38VllVxPFasj3U2tbUhOTUdxeSWa29rxa0oaUjOyUFhSjhL2H2o7FxXH5lON9s4/kZaZjeBzkcjIzkFjcyufA7nkZjOgvrEZDU0tPPChgOeUuyeOnvwRUfHncSkjE14BwfD0P4Ok5BQuLp4%2biE5I4iD5siDpWkExAyMf0YlJHAgHVxmOO7vzgIoWoYiO5xNXxMQjLDIWHt4BkPkEorb%2bJh%2bXcvkK5Ew/BVmkPzQihveX%2bwfjMlu0V2AIA78Yd%2b51czCDzobDl83T3skNf9%2b5a9KlN2ED9FhfXzcqoG%2bi2vKy9oXpvLa2xgMnoi0FTM9KFH5TYCWmuFb7cJMesZ24293D6wTXnBIFZyRzcxrzGUC7T8gTFemb6NbRdZvR/wbaOrp4qEu7RbS9xcpcOrt4maStvZO/IxC9w2MTUF1Xz8Z1copTX%2brTefsv3GxuYdLKqU76aPcopyNkzpVstg2gSRHt6PwdPuEENy8/uMp98cOxE3Bw8eDnkOoo/ifqOXnImXixsgwePgE4dPwUf0OghReVVuC0XxC%2bO2IPdy9/uMn9GN0DmG1Ihr2zG393kPkGwlnmDf%2bQszhk74jy6zWP2Gew6ltla4BmDM50%2bt25BR6urBgVDAwOYWBomB8Fot0KaxNoSnXi8ybka0JfdhNotVp%2bfIZHlLjXc5%2bXSQelZUMb0X1lZZWPmZ9/gFWWv0ynzCQAFcySxyReQE9vH6czGTd67urtH%2bDnlXIyQCOjY7wPAUTnkhZJbfRwYi5NX6ZHahIAoj6dXbK8jm6enLJ0GxDtyTrL2S1AtD3m6MKPgbPMC0fYUSErT7RuaGo2GjQxbZ9G3X/jLcEkAGS5uVOiUvFnsdHxce6gKNnu041AO/%2b4TcWNFsnQyAjvSzS36Beh53GFzZ28JQdVzx0MPaLtY/oan8OEsn5z21af/j/JACkclgCQAJAAkACQAJAAkACQAJAAeHXTP71g/008v1HSAAAAAElFTkSuQmCC' /%3e%3c/svg%3e"},"contributors":["Vourhey","PaTara43","katerina510"],"translated":true,"headings":[],"subtitles":[{"depth":3,"value":"1. Настройте симуляцию","anchor":"#1-настройте-симуляцию"},{"depth":3,"value":"2. Скачайте пакет контроллера Робономики","anchor":"#2-скачайте-пакет-контроллера-робономики"},{"depth":3,"value":"3. Управление аккаунтами в децентрализованном приложении","anchor":"#3-управление-аккаунтами-в-децентрализованном-приложении"},{"depth":3,"value":"4. Запустите Робономику","anchor":"#4-запустите-робономику"}],"content":"\n**Давайте посмотрим, как контроль Парачейна Робономики заставляет двигаться марсоход Curiosity. Требования:**\n- ROS Melodic + Gazebo + RViz (руководство по установке [здесь](http://wiki.ros.org/melodic/Installation))\n- дополнительные пакеты:\n```shell\nsudo apt-get install ros-melodic-gazebo-ros-control ros-melodic-effort-controllers ros-melodic-joint-state-controller\n```\n- IPFS до [0.6.0](https://dist.ipfs.io/go-ipfs/v0.6.0/go-ipfs_v0.6.0_linux-386.tar.gz)\n- расширение [IPFS Companion](https://github.com/ipfs/ipfs-companion)\n- узел Робономики (двоичный файл) (скачайте последнюю версию [здесь](https://github.com/airalab/robonomics/releases). Это руководство было успешно протестировано на v1.1)\n\nВ этом видео показан успешный запуск:\n\nhttps://www.youtube.com/watch?v=6BSOyRbmac8\n\n### 1. Настройте симуляцию\nСкачайте пакет для марсохода Curiosity:\n```shell\nmkdir -p robonomics_ws/src\ncd robonomics_ws/src\ngit clone https://bitbucket.org/theconstructcore/curiosity_mars_rover/src/master/\ncd ..\ncatkin build\n```\nНужно настроить начальные условия, чтобы наш марсоход успешно появился:\n- Перейдите в\n\n`src/master/curiosity_mars_rover_description/worlds` и измените строку 14 файла `mars_curiosity.world` на \n`<pose>0 0 8 0 0 0</pose>`\n\n- Перейдите в\n\n`src/master/curiosity_mars_rover_description/launch` и измените строку 4 файла `mars_curiosity_world.launch` на\n`<arg name=\"paused\" default=\"false\"/>`\n\nНе забудьте добавить команду source в `~/.bashrc`\n`source /home/$USER/robonomics_ws/devel/setup.bash`\n\n\n- Перезагрузите консоль и запустите симуляцию:\n\n```shell\nroslaunch curiosity_mars_rover_description main_real_mars.launch\n```\n![марсоход](../images/curiosity-demo/rover.jpg?raw=true \"Марсоход\")\n\nЗаметьте: если картинка темная, например, затененная, измените `Camera` на `Orthorgraphic` в панели инструментов Gazebo.\nСимуляцию можно закрыть на некоторое время.\n\n------------\n\n### 2. Скачайте пакет контроллера Робономики\nЧтобы загрузить пакет контролера для типа марсоход, введите в терминале:\n```shell\ncd ~/robonomics_ws/src\ngit clone https://github.com/PaTara43/robonomics_sample_controller\ncd robonomics_sample_controller\npip3 install -r requirements.txt\npip3 install rospkg\ncd ..\ncatkin build -DPYTHON_EXECUTABLE=/usr/bin/python3 # The controller supports python3\n```\n\n------------\n\n### 3. Управление аккаунтами в децентрализованном приложении\nТак как мы тестируем, давайте создадим локальную сеть Робономики с двоичным файлом Робономики:\n```shell\n./robonomics --dev --tmp\n```\n\n![Запускаем узел](../images/curiosity-demo/robonomics.jpg?raw=true \"Запускаем узел\")\n\n\nПерейдите на [портал парачейна Робономики](https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/) и переключитесь на локальный узел. \n\n![Локальный узел](../images/curiosity-demo/local_node.jpg?raw=true \"Локальный узел\")\n\n\nПерейдите в Accounts и создайте аккаунты **CURIOSITY** и **EMPLOYER**.\n\n**Важно**! Скопируйте адрес каждого аккаунта (чтобы это сделать, кликните на иконку аккаунта) и **сид-фразу** аккаунта Curiosity (сгенерированную при создании аккаунта). Отправьте токены на эти аккаунты. Подробнее об аккаунтах Робономики можно прочесть [здесь](https://wiki.robonomics.network/docs/ru/create-account-in-dapp/)\n\n![Создание аккаунта](../images/curiosity-demo/account_creation.jpg?raw=true \"Создание аккаунта\")\n\n\nДобавьте эти адреса, сид и адрес узла (по умолчанию `ws://127.0.0.1:9944` - узел разработчика) в `config.config` в `robonomics_ws/src/robonomics_sample_controller/src`. Без кавычек.\n\n------------\n\n\n### 4. Запустите Робономику\n\nПеред тем как двигаться дальше, убедитесь, что Вы установили [расширение IPFS Companion](https://github.com/ipfs/ipfs-companion).\n\nВ отдельном терминале запустите IPFS:\n```shell\nifps init #you only need to do this once per IPFS installation\nipfs daemon\n```\n\nВ другом отдельном терминале запустите симуляцию Curiosity, если она еще не запущена:\n```shell\nroslaunch curiosity_mars_rover_description main_real_mars.launch\n```\nДождитесь выполнения операций.\n\nВ другом терминале запустите контроллера:\n```shell\nrosrun robonomics_sample_controller sample_controller.py\n```\n![Контроллер](../images/curiosity-demo/controller.jpg?raw=true \"Контроллер\")\n\n\nТеперь Вы можете отправлять транзакции, запускающие движение и сборку данных марсоходом. Чтобы это сделать, Вы можете использовать все тот же [портал парачейна Робономики](https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/).\nПерейдите в `Developer->Extrinsics` и выберите аккаунт employer для Curiosity, экстринсик `launch`, аккаунт Curiosity как целевой аккаунт и `yes` как параметр.\nОтправьте экстринсик.\n\n![Экстринсик](../images/curiosity-demo/extrinsic.jpg?raw=true \"Экстринсик\")\n\n\nРобот должен начать двигаться. Он не будет принимать команды от других аккаунтов, а также команды с параметром `no`. Марсоход будет двигаться и собирать данные примерно около минуты.\nЗатем, после выполнения работы:\n\n![Работа выполнена](../images/curiosity-demo/job_done.jpg?raw=true \"Работа выполнена\")\n\n\nНа портале Робономики перейдите в `Developer -> Chain state` и получите журнал данных `CURIOSITY`, используя кнопку “+” с выбранным `datalog -> RingBufferItem` в качестве запроса: \n\n![Журнал данных](../images/curiosity-demo/datalog.jpg?raw=true \"Журнал данных\")\n\nТеперь хэш IPFS телеметрии сохранен в блокчейне. Чтобы посмотреть данные, просто скопируйте хэш и найдите его на шлюзе:\n\n![Данные в IPFS](../images/curiosity-demo/data_in_ipfs.jpg?raw=true \"Данные в IPFS\")\n\n\nЭта телеметрия хранится в децентрализованном хранилище, а ее хэш хранится в блокчейне!\n"}},"context":{}}