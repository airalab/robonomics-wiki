{"hash":"2310785970cc94a8f6e745a2fc6ad60f7447cafd","data":{"doc":{"id":"3b1dbe92acfaf34dc627758b84cad240","title":"كيفية تحديث إصدار نود روبونوميكس كولاتور","description":"","contributors":["Leemo94"],"headings":[],"subtitles":[{"depth":2,"value":"","anchor":"#الأوامر-المطلوبة"},{"depth":2,"value":"","anchor":"#تغيير-قاعدة-بيانات-سلسلة-ريلي-كوساما-بدون-تعيين-مسار-أساسي"}],"content":"\nمن المستحسن قراءة المقالات التالية قبل قراءة هذا المنشور: [\"كيفية بناء نود كولاتور\"](/docs/how-to-build-collator-node) و [\"كيفية تشغيل روبونوميكس كولاور\"](/docs/how-to-launch-the-robonomics-collator).\n\nيحتوي هذا المقال على الأوامر المطلوبة لتحديث نود روبونوميكس كولاتور (العامل على نظام أوبونتو)، ويعطي أيضًا مثالًا بعد ذلك.\n\n## **الأوامر المطلوبة**\n\n0. قبل أن تبدأ، من المستحسن أن تكون مسجل الدخول كـ `root`، إذا لم يكن الأمر كذلك، فأوصيك بأن تستخدم:\n\n<code-helper copy>\n\n```shell\nsudo su -\n```\n\n</code-helper>\n\n1. قم بإيقاف خدمة روبونوميكس:\n\n<code-helper copy>\n\n```shell\nsystemctl stop robonomics.service\n```\n\n</code-helper>\n\n2. قم بإزالة الإصدار السابق من روبونوميكس (تأكد من أنك في المجلد الصحيح):\n\n<code-helper copy>\n\n```shell\nrm -f robonomics.X.X.X-ubuntu-x86_64.tar.gz\n```\n\n</code-helper>\n\n3. احصل على [أحدث إصدار](https://github.com/airalab/robonomics/releases) من روبونوميكس:\n\n<code-helper copy>\n\n```shell\nwget https://github.com/airalab/robonomics/releases/vX.X.X/.....\n```\n</code-helper>\n\n\n4. قم بفك الضغط عن الملف:\n\n<code-helper copy>\n\n```shell\ntar -xf robonomics-X.X.X-x86_64-unknown-linux.gnu.tar.gz\n```\n</code-helper>\n\n5. قم بنقل الملف:\n\n<code-helper copy>\n\n```shell\nmv robonomics /usr/local/bin/\n```\n</code-helper>\n\n<robo-wiki-note type=\"note\">\n\nيجب عليك نقل هذا الملف إلى المجلد الصحيح الذي قمت بتثبيت نود روبونوميكس فيه)\n\n</robo-wiki-note>\n\n6. قم بتشغيل روبونوميكس:\n\n<code-helper copy>\n\n```shell\nsystemctl start robonomics.service\n```\n</code-helper>\n\nمثال لترقية نود الكولاتور إلى روبونوميكس v1.8.4:\n\n<code-helper>\n\n```shell\nsudo su -\ncd /home/admin\nsystemctl stop robonomics.service\nrm -f robonomics-1.7.3-x86_64-unknown-linux-gnu.tar.gz\nwget https://github.com/airalab/robonomics/releases/download/v1.8.4/robonomics-1.8.4-x86_64-unknown-linux-gnu.tar.gz\ntar -xf robonomics-1.8.4-x86_64-unknown-linux-gnu.tar.gz\nmv robonomics /usr/local/bin/\nsystemctl start robonomics.service\n\n```\n</code-helper>\n\n## **تغيير قاعدة بيانات سلسلة ريلي كوساما بدون تعيين مسار أساسي**\n\nفي بعض الأحيان، تتسبب بعض اللقطات الفورية لسلسلة ريلي كوساما في حدوث أخطاء في نودك. وهذا غالبًا ما يتسبب في توقف عمل النود. مثال على الخطأ الناجم عن قاعدة بيانات سلسلة ريلي معطوبة:\n\n<code-helper>\n\n```shell\nDec 08 19:14:31 ns3159483 robonomics[1019836]: 2022-12-08 19:14:31 [Relaychain] GRANDPA voter error: could not complete a round on disk: Database\nDec 08 19:14:31 ns3159483 robonomics[1019836]: 2022-12-08 19:14:31 [Relaychain] Essential task `grandpa-voter` failed. Shutting down service.\nDec 08 19:14:32 ns3159483 robonomics[1019836]: Error: Service(Other(\"Essential task failed.\"))\nDec 08 19:14:32 ns3159483 systemd[1]: robonomics.service: Main process exited, code=exited, status=1/FAILURE\nDec 08 19:14:32 ns3159483 systemd[1]: robonomics.service: Failed with result 'exit-code'.\nec 08 19:14:33 ns3159483 robonomics[1022922]: Error: Service(Client(Backend(\"Invalid argument: Column families not opened: col12, col11, col10, col9, col8, col7, col6, col5, col4, col3, col2, col1, col0\")))\nDec 08 19:14:33 ns3159483 systemd[1]: robonomics.service: Main process exited, code=exited, status=1/FAILURE\nDec 08 19:14:33 ns3159483 systemd[1]: robonomics.service: Failed with result 'exit-code'.\n```\n</code-helper>\n\nلحل هذا الخطأ، يجب عليك إزالة قاعدة بيانات سلسلة ريلي كوساما الحالية (على الأرجح RocksDb) واستبدالها بقاعدة بيانات أخرى مثل ParityDb. قم بتنفيذ الأوامر التالية:\n\n1. ابحث عن مجلد نود روبونوميكس وتحقق من الملفات:\n\n<code-helper>\n\n```shell\ncd /home/robonomics/\nls -a\n```\n</code-helper>\n\n2. تأكد من رؤية مجلد polkadot، ثم انتقل إلى مجلد chains:\n\n<code-helper>\n\n```shell\ncd /polkadot/chains/\nls -a\n```\n</code-helper>\n\n3. احذف الدليل \"ksmcc3\":\n\n<code-helper copy>\n\n```shell\nrm -r ksmcc3\n```\n</code-helper>\n\n4. قم بإنشاء مجلد جديد بالاسم `ksmcc3`.\n\n<code-helper>\n\n```shell\nmkdir ksmcc3\nchown -R robonomics:robonomics ksmcc3\ncd ksmcc3\n```\n\n</code-helper>\n\n5. الآن تحتاج إلى تنزيل لقطة فورية جديدة. يستخدم هذا المثال لقطة فورية لسلسلة ريلي مقطوعة بشكل كبير، ولكن يمكنك استبدالها بأي لقطة فورية تفضلها.\n\n<code-helper copy>\n\n```shell\nwget wget https://snaps.sik.rocks/ksm_pruned.tar.gz\n```\n\n</code-helper>\n\n6. أثناء تنزيل اللقطة الفورية، افتح جلسة جديدة وقم بتحرير ملف الخدمة الخاص بك:\n\n\n<code-helper copy>\n\n```shell\nsudo nano /etc/systemd/system/robonomics.service\n```\n\n</code-helper>\n\nقم بتعديل الأسطر داخل ملف الخدمة التي تتعلق بقاعدة البيانات والتقليم:\n\n<code-helper copy>\n\n```shell\n  --database=paritydb \\\n  --state-pruning=100 \\\n  --blocks-pruning=100 \\\n  --execution=Wasm\n```\n\n</code-helper>\n\n  \nاستخدم `Ctrl + S` ثم `Ctrl + X` لحفظ والخروج من ملف الخدمة.\n\n7. الآن تحتاج إلى إعادة تحميل الخدمة الخاصة بك.\n\n<code-helper copy>\n\n```shell\nsystemctl daemon-reload\n```\n</code-helper>\n\n\n8. في هذا الوقت، في الجلسة الأخرى، نأمل أن يكون قد تم تنزيل قاعدة البيانات الجديدة، لذا قم بفك الضغط عن الملف:\n\n<code-helper copy>\n\n```shell\ntar -xvzf ksm_pruned.tar.gz\n```\n\n</code-helper>\n\n9. بعد اكتمال عملية فك الضغط، قم بتنفيذ الأمر التالي:\n\n<code-helper copy>\n\n\n```shell\nchown -R robonomics:robonomics paritydb\n```\n\n</code-helper>\n\n10. الآن يمكنك بدء الخدمة، ومراقبتها للتحقق من عدم وجود أخطاء، والتحقق من أنها تتصل بكل من سلسلة ريلي وباراتشين.\n\n\n<code-helper copy>\n\n\n```shell\nsystemctl start robonomics && journalctl -fu robonomics\n```\n</code-helper>","tools":[],"fileInfo":{"path":"ar/how-to-update-collator-node-version.md","name":"how-to-update-collator-node-version"}}},"context":{}}