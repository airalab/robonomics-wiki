{"hash":"5027d5d4988b79447b45f0fec9effc9302a6f384","data":{"doc":{"id":"dc4cf2104cb499b9d8d26d826cfe0b2c","title":"خدمات النسخ الاحتياطي","description":"","contributors":["tubleronchik","LoSk-p"],"headings":[],"subtitles":[{"depth":2,"value":"إنشاء نسخة احتياطية لتكوين Home Assistant","anchor":"#إنشاء-نسخة-احتياطية-لتكوين-home-assistant"},{"depth":2,"value":"استعادة تكوين Home Assistant من النسخة الاحتياطية","anchor":"#استعادة-تكوين-home-assistant-من-النسخة-الاحتياطية"},{"depth":2,"value":"استعادة تكوين Mosquitto و Zigbee2MQTT لطريقة تثبيت Home Assistant Core","anchor":"#استعادة-تكوين-mosquitto-و-zigbee2mqtt-لطريقة-تثبيت-home-assistant-core"},{"depth":2,"value":"نسخ احتياطي لتكوين Mosquitto و Zigbee2MQTT لطريقة تثبيت Home Assistant بواسطة Docker","anchor":"#نسخ-احتياطي-لتكوين-mosquitto-و-zigbee2mqtt-لطريقة-تثبيت-home-assistant-بواسطة-docker"},{"depth":2,"value":"أزرار النسخ الاحتياطي","anchor":"#أزرار-النسخ-الاحتياطي"}],"content":"\n**في هذه المقالة، ستتعلم كيفية إنشاء نسخ احتياطية لتكوين Home Assistant الخاص بك واستعادته عند الحاجة. لإنشاء النسخ الاحتياطية، يتم استدعاء خدمة تقوم بإنشاء أرشيف آمن يحتوي على ملفات التكوين. تقوم الخدمة أيضًا بإضافة تكوين Mosquitto brocker و Zigbee2MQTT إلى النسخة الاحتياطية إذا كانت موجودة. ثم تقوم هذه الخدمة بإضافة الأرشيف إلى IPFS وتخزين معرف النتيجة في Robonomics Digital Twin.**\n## إنشاء نسخة احتياطية لتكوين Home Assistant\n\nيتيح لك إنشاء نسخة احتياطية استعادة تكوين Home Assistant الخاص بك بسهولة في حالة حدوث خطأ.\n\n<robo-wiki-video autoplay loop controls :videos=\"[{src: 'https://cloudflare-ipfs.com/ipfs/QmZN5LfWR4XwAiZ3jEcw7xbCnT81NsF5XE3XFaNhMm5ba1', type:'mp4'}]\" />\n\n<robo-wiki-note type=\"warning\" title=\"WARNING\">\n\nلكي تتمكن من إجراء نسخ احتياطية واستعادة التكوين الخاص بك، من الضروري استخدام **بوابة IPFS مخصصة** مثل Pinata. بدون ذلك، ستتم تخزين نسخة الاحتياطية الخاصة بك فقط على عقدة IPFS المحلية الخاصة بك، مما قد يمنعك من استعادة تكوين Home Assistant الخاص بك في حالة فشل العقدة المحلية.\n\n</robo-wiki-note>\n\n1. في واجهة الويب لـ Home Assistant، انتقل إلى `أدوات المطور` -> `الخدمات`. ابحث عن `Robonomics: حفظ النسخة الاحتياطية في Robonomics` واضغط على `استدعاء الخدمة`.\n\n2. انتظر حتى تظهر إشعار `تم تحديث النسخة الاحتياطية في Robonomics` في `الإشعارات`.\n\n<robo-wiki-note type=\"warning\" title=\"WARNING\">\n\nلا تحاول إنشاء نسخة احتياطية أو استعادة التكوين فور تحميل Home Assistant و Robonomics Integration. يرجى **الانتظار لمدة تقريبية 5 دقائق** لإتمام الإعداد الأولي.\n\n</robo-wiki-note>\n\nوسيطات الخدمة:\n- **نسخة احتياطية كاملة** (الافتراضي: خاطئ) - إضافة قاعدة البيانات إلى النسخة الاحتياطية، بحيث يتم تخزين تاريخ حالات الكيان أيضًا.\n- **مسار ملف كلمة مرور mosquitto** (الافتراضي: `/etc/mosquitto`) - إذا كنت تستخدم طرق تثبيت Home Assistant Core أو Docker وليس لديك مسار افتراضي لـ Mosquitto brocker، يجب عليك تغيير هذا المعلم. *لا يلزم ذلك لـ Home Assistant OS أو Superviser*.\n\n## استعادة تكوين Home Assistant من النسخة الاحتياطية\n\nلكي تتمكن من استعادة التكوين الخاص بك، ستحتاج إلى Home Assistant و Robonomics Integration مثبتين. \n\n<robo-wiki-video autoplay loop controls :videos=\"[{src: 'https://cloudflare-ipfs.com/ipfs/QmNcJpHWWuZzwNCQryTw5kcki49oNTjEb8xvnfffSYfRVa', type:'mp4'}]\" />\n\n<robo-wiki-note type=\"warning\" title=\"WARNING\">\n\nلضمان استعادة التكوين الناجحة في طرق تثبيت Home Assistant Core و Docker، تحتاج إلى أداء خطوات الإعداد الإضافية كما هو موضح في نهاية الصفحة.\n\n</robo-wiki-note>\n\n1. قم بتثبيت Home Assistant مع Robonomics Integration (إذا لم يتم تثبيته بعد)، باتباع الخطوات الواردة في المقالة الخاصة بـ [طريقة التثبيت المطلوبة](https://wiki.robonomics.network/docs/robonomics-smart-home-overview/#start-هنا-your-smart-home).\n\n2.  [قم بإعداد Robonomics Integration](https://wiki.robonomics.network/docs/robonomics-hass-integration) باستخدام **نفس البذور** التي استخدمتها في تكوين Robonomics السابق. إذا انتهت اشتراكك، [أعد تنشيطه](https://wiki.robonomics.network/docs/sub-activate).\n\n3. في واجهة الويب لـ Home Assistant، انتقل إلى `أدوات المطور` -> `الخدمات`. ابحث عن `Robonomics: استعادة من النسخة الاحتياطية في Robonomics` واضغط على `استدعاء الخدمة`. انتقل إلى صفحة `نظرة عامة` للتحقق من حالة النسخة الاحتياطية الخاصة بك.\n\n4. بعد الاستعادة، سيتم إعادة تشغيل Home Assistant تلقائيًا. إذا لم يتم إعادة تشغيل Home Assistant لأي سبب، يمكنك التحقق من حالة الاستعادة عن طريق مراقبة حالة الكيان `robonomics.backup`. إذا كانت الحالة هي `تمت الاستعادة`، فسيتعين عليك إعادة تشغيل Home Assistant يدويًا عن طريق الانتقال إلى `الإعدادات` > `النظام` والنقر على زر `إعادة التشغيل` الموجود في الزاوية العلوية اليمنى.\n\n5. إذا كان النسخة الاحتياطية الخاصة بك تتضمن تكوين Zigbee2MQTT أو Mosquitto، فيجب عليك إعادة تشغيل هذه الخدمات لتمكين التكوين الجديد. يمكنك القيام بذلك يدويًا عن طريق إعادة تشغيل الخدمات بشكل فردي، أو يمكنك ببساطة إعادة تشغيل جهاز Home Assistant لضمان إعادة تشغيل جميع الخدمات.\n\nوسيطات الخدمة:\n- **مسار ملف كلمة مرور mosquitto** (الافتراضي: `/etc/mosquitto`) - إذا كنت تستخدم طرق تثبيت Home Assistant Core أو Docker وليس لديك مسار افتراضي لـ Mosquitto brocker، يجب عليك تغيير هذا المعلم. *لا يلزم ذلك لـ Home Assistant OS أو Superviser*.\n- **مسار تكوين Zigbee2MQTT** (الافتراضي: `/opt/zigbee2mqtt`) - إذا كنت تستخدم طرق تثبيت Home Assistant Core أو Docker وليس لديك مسار افتراضي لـ Zigbee2MQTT، يجب عليك تغيير هذا المعلم. *لا يلزم ذلك لـ Home Assistant OS أو Superviser*.\n\n## استعادة تكوين Mosquitto و Zigbee2MQTT لطريقة تثبيت Home Assistant Core\n\nإذا كانت النسخة الاحتياطية تتضمن تكوين Mosquitto أو Zigbee2MQTT، خلال عملية الاستعادة، سيتم وضعهما في المسار الافتراضي أو في المسار المحدد في المعلمات. ومع ذلك، إذا قمت بتثبيت تكامل Robonomics في Home Assistant Core الموجود *(ليس من صورة Robonomics المثبتة مسبقًا)*، فقد لا يكون لدى المستخدم `homeassistant` صلاحية الوصول إلى هذا المسار.\n\nلذا لاستعادة تكوين Mosquitto و Zigbee2MQTT، يجب منح أذونات القراءة اللازمة للمستخدم `homeassistant`:\n```bash\nsudo chmod a+w /opt/zigbee2mqtt /etc/mosquitto\n```\n\n## نسخ احتياطي لتكوين Mosquitto و Zigbee2MQTT لطريقة تثبيت Home Assistant بواسطة Docker\n\nلنقل نسخ احتياطية لتكوينات Mosquitto و Zigbee2MQTT من حاوية Docker ، تحتاج إلى إنشاء أحجام لتكويناتهما المعنية. يمكن تحقيق ذلك عن طريق تشغيل حاوية Home Assistant الخاصة بك بوسائط إضافية:\n\n```bash\ndocker run -d \\\n  --name homeassistant \\\n  --privileged \\\n  --restart=unless-stopped \\\n  -e TZ=MY_TIME_ZONE \\\n  -v /PATH_TO_YOUR_CONFIG:/config \\\n  -v /etc/mosquitto:/etc/mosquitto \\\n  -v /etc/mosquitto:/opt/zigbee2mqtt \\\n  --network=host \\\n  ghcr.io/home-assistant/home-assistant:stable\n```\n\nأو إجراء تغييرات في ملف `compose.yaml` الخاص بك:\n\n```yaml\nversion: '3'\nservices:\n  homeassistant:\n    container_name: homeassistant\n    image: \"ghcr.io/home-assistant/home-assistant:stable\"\n    volumes:\n      - /PATH_TO_YOUR_CONFIG:/config\n      - /etc/localtime:/etc/localtime:ro\n      - /etc/mosquitto:/etc/mosquitto\n      - /etc/mosquitto:/opt/zigbee2mqtt\n    restart: unless-stopped\n    privileged: true\n    network_mode: host\n```\n<robo-wiki-note type=\"note\" title=\"Note\">\n\nيرجى ملاحظة أن المسارات الافتراضية لتكوينات Mosquitto و Zigbee2MQTT هي `/etc/mosquitto` و `/opt/zigbee2mqtt` على التوالي. ومع ذلك ، قد تختلف هذه المسارات اعتمادًا على إعدادك المحدد.\n\n</robo-wiki-note>\n\n## أزرار النسخ الاحتياطي\n\nبالإضافة إلى استخدام الخدمات للعمل مع النسخ الاحتياطية ، يمكنك تبسيط العملية باستخدام أزرار `button.create_backup` و `button.restore_from_backup` من تكامل Robonomics. تُطلق هذه الأزرار الخدمات المعنية بالمعلمات الافتراضية (تنشئ زر النسخ الاحتياطي نسخة احتياطية بدون تاريخ).\n\n<robo-wiki-video autoplay loop controls :videos=\"[{src: 'https://cloudflare-ipfs.com/ipfs/Qmc1fexYaJMsK6ch6JhjL6aqnAwqYNAzo5nEwYgDpnp4gj', type:'mp4'}]\" />\n\nلإضافة أزرار إلى لوحة التحكم الخاصة بك ، اتبع هذه الخطوات:\n\n1. انقر على النقاط الثلاث في الزاوية اليمنى العلوية من لوحة التحكم.\n2. حدد `تحرير لوحة التحكم`.\n3. انقر على زر `إضافة بطاقة` في الزاوية اليمنى السفلية.\n4. اختر بطاقة `الكيانات`.\n5. في حقل `الكيانات` ، ابحث عن كيانات button.create_backup و button.restore_from_backup.\n6. اضغط على `حفظ` لإضافة الكيانات إلى البطاقة.\n7. انتهِ من التحرير بالنقر على زر `تم` في الزاوية اليمنى العلوية.","tools":["Robonomics Home Assistant Integration 1.4.2 https://github.com/airalab/homeassistant-robonomics-integration"],"fileInfo":{"path":"ar/backup-services.md","name":"backup-services"}}},"context":{}}