{"hash":"a2b58b530f9a4cc6b7f00c97a643abd0af484023","data":{"doc":{"id":"a1851f7d728f55e55a9bde42a214e4a7","title":"Connect any ROS-compatible robot under Robonomics parachain control. Part 2, IPFS","contributors":["PaTara43"],"translated":false,"headings":[],"subtitles":[{"depth":2,"value":"1. Add dependencies","anchor":"#1-add-dependencies"},{"depth":2,"value":"2. Manage accounts in DAPP","anchor":"#2-manage-accounts-in-dapp"},{"depth":2,"value":"3. Launch","anchor":"#3-launch"}],"content":"\n**In this article we will continue using Robonomics tools to make a drone be controlled by a parachain. This time we will add sending data to IPFS and hash storing in chain options. Below is the instruction and code snippets. Requirements:**\n- [**Part 1 of this tutorial**](/docs/connect-any-ros-compatible-robot-under-robonomics-parachain-control-1)\n- Ubuntu 18.04 LTS\n- ROS Melodic + Gazebo + RViz (installation manual [here](http://wiki.ros.org/melodic/Installation))\n- IPFS 0.4.22 (download from [here](https://dist.ipfs.io/go-ipfs/v0.4.22/go-ipfs_v0.4.22_linux-386.tar.gz) and install)\n- Robonomics node (binary file) (download latest release [here](https://github.com/airalab/robonomics/releases))\n- Python dependencies:\n```\npip install cv_bridge ipfshttpclient\n```\nThe entire process of coding this part of demo is presented in a video below.\n\nhttps://www.youtube.com/watch?v=dliLb6GHgpo&feature=youtu.be\n\n\n## 1. Add dependencies\nIf we launch a simulation and look at the topic list (see previous tutorial), we will see, that there is one topic containing front camera data and using `sensor_msgs/Image` message type:\n\n![front_camera](../images/drone-demo/front_camera.jpg \"front_camera\")\n\nLet's try to take a picture every 1 second and after the flight publish these photos to IPFS. If you have completed the first tutorial, you don't need to download anything else. It's the `drone_sample_controller_pictures.py` script.\n## 2. Manage accounts in DAPP\nAs done in a previous tutorial, create a local robonomics network node with robonomics binary file:\n```\n./robonomics --dev\n```\n**Important!** Before next launches it is necessary to remove a directory `db` with\n```\nrm -rf /home/$USER/.local/share/robonomics/chains/dev/db\n```\nAfter a successful launch create accounts following [this](/docs/create-account-in-dapp) manual. **Do not forget to save each account's seed and address! You will need them for transactions**. Add these addresses, seeds and path to robonomics binary file to file `config.config` in `robonomics_ws/src/robonomics_sample_controller/src`. Transfer some money (units) to these accounts:\n\n![balances](../images/drone-demo/balances.jpg \"balances\")\n## 3. Launch\nUp to now the **only thing running** should be the robonomics local node. In a separate terminal launch drone simulation:\n```\nroslaunch sjtu_drone simple.launch\n```\nIn another one launch ipfs daemon:\n```\nifps init # you only need to do this once\nipfs daemon\n```\nRun the script:\n```\nrosrun drone_simulator_controller drone_sample_controller_pictures.py\n```\nNow you can send a transaction triggering the drone to start flying and taking pictures. To do so, you should use the Robonomics IO `write` subcommand of robonomics binary file:\n```\necho \"ON\" | ./robonomics io write launch -r <DRONE_ADDRESS> -s <EMPLOYER’S_KEY>\n```\nWhere `<DRONE_ADDRESS>`  and `<EMPLOYER’S_KEY>` are replaced with  previously saved strings accordingly.\nYou should see the log `\"Taking Off\"` and the drone should start flying and taking pictures:\n\n![flying_picturing](../images/drone-demo/flying_picturing.jpg \"flying_picturing\")\n\nLater, when the job is done, on the Robonomics portal go to `Developer` -> `Chain state` and add a `DRONE` datalog using `“+”` button with selected `datalog` as state query. The IPFS hash of the telemetry has been saved in the blockchain. To see the data simply copy the hash and add it to the local [gateway](https://gateway.ipfs.io/ipfs/QmeYYwD4y4DgVVdAzhT7wW5vrvmbKPQj8wcV2pAzjbj886/docs/getting-started/) address `localhost:8080/ipfs/`:\n\n![Voila](../images/drone-demo/datalog.jpg \"Voila\")\n"}},"context":{}}