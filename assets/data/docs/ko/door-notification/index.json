{"hash":"b019132cdf18eb9f78219b0565b919b16f679c3f","data":{"doc":{"id":"8b0e36c5d83fc5ddce5dff5acb17139c","title":"문이 열릴 때 알림 받기","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[{"depth":2,"value":"텔레그램 봇 알림","anchor":"#텔레그램-봇-알림"},{"depth":2,"value":"문이 열릴 때 알림","anchor":"#문이-열릴-때-알림"}],"content":"\n이 문서에서는 텔레그램 봇 알림 통합을 설치하고 자동화를 구성하는 방법을 알려드리겠습니다. 이 자동화는 문이 열릴 때 텔레그램 계정으로 알림을 보냅니다.\n\n## 텔레그램 봇 알림\n\n먼저 개인 텔레그램 봇을 만들어야 합니다. 이를 위해서는 [특수 텔레그램 봇 @BotFather](https://t.me/botfather)로 이동하여 지침을 따르세요. \nHTTP API에 액세스하기 위한 토큰을 저장하세요.\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/bot-father.mp4', type:'mp4'}]\" />\n\n<robo-wiki-note type=\"warning\">\n\n토큰을 **안전하게** 보관하고 **안전하게** 저장하세요. 누구나 이 토큰을 사용하여 봇을 제어할 수 있습니다. \n\n</robo-wiki-note>\n\n다음 단계는 ***사용자 채팅 ID***를 찾는 것입니다. 이를 위해 다음 [GetIdsBot](https://t.me/getidsbot)을 사용하세요. \n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/get-id-bot.mp4', type:'mp4'}]\" />\n\n이제 \"텔레그램 방송\" 통합을 설치해 보겠습니다. 이 통합은 텔레그램으로 메시지를 보냅니다.\n\nRobonomics 사전 설치된 이미지, Home Assistant Docker 또는 Home Assistant Core의 경우 `configuration.yaml`을 편집해야 합니다. `ssh`를 통해 Raspberry Pi에 연결하세요.\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/open-config.mp4', type:'mp4'}]\" />\n\n<code-helper additionalLine=\"rasppi_username@rasppi_hostname\" >\n\n```shell\nsudo -u homeassistant -H -s\ncd\ncd .homeassistant \nnano configuration.yaml\n```\n\n</code-helper >\n\n다음 줄을 파일 끝에 붙여넣으세요. **봇 API 키**와 **사용자 채팅 ID**를 입력하세요. 또한 알림 서비스의 이름을 만들어 주세요.\n\n\n<code-helper copy >\n\n```shell\ntelegram_bot:\n  - platform: broadcast\n    api_key: <YOUR_API_KEY>\n    allowed_chat_ids:\n      -  <YOUR_USER_CHAT_ID> # 123456789  example id of a user\n      \nnotify:\n  - platform: telegram\n    name: <NOTIFIER_NAME>\n    chat_id: <YOUR_USER_CHAT_ID>\n```\n\n</code-helper >\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/insert-config.mp4', type:'mp4'}]\" />\n\n**구성을 저장하고 Home Assistant를 다시 로드하세요.**\n\n\n결과적으로 Home Assistant 서비스에는 메시지를 텔레그램 채팅으로 보내는 서비스가 생성됩니다. \nHome Assistant 웹 인터페이스의 개발자 도구 메뉴에서 확인할 수 있습니다. \n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/telegram-result.mp4', type:'mp4'}]\" />\n\n##  문이 열릴 때 알림\n\n이제 자동화를 생성할 시간입니다. 먼저 이 링크에서 Home Assistant로 블루프린트를 가져옵니다:\n\n<code-helper copy>\n\n```shell\nhttps://github.com/airalab/home-assistant-blueprints/blob/main/door-opened-notifications/door-notifications.yaml\n```\n\n</code-helper >\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/insert-blue.mp4', type:'mp4'}]\" />\n\n그리고 자동화를 생성하세요:\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/create-automation.mp4', type:'mp4'}]\" />\n\n이제 문이 열릴 때마다 텔레그램 봇으로 메시지를 받게 됩니다.\n\n<robo-wiki-note type=\"okay\">\n이 자동화를 집의 모든 문/창문에 사용할 수 있습니다.\n</robo-wiki-note>\n\n","tools":["Home Assistant 2022.11.3 https://github.com/home-assistant/core"],"fileInfo":{"path":"ko/door-notification.md","name":"door-notification"}}},"context":{}}