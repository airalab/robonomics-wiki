{"hash":"374e5e6bd3c921ba1dd42a764de57557a5b04902","data":{"doc":{"id":"8bd59a2b686ed055bdc759701594dc37","title":"로보노믹스 콜레이터 노드 버전 업데이트 방법","description":"","contributors":["Leemo94"],"headings":[],"subtitles":[{"depth":2,"value":"","anchor":"#필수-명령어"},{"depth":2,"value":"","anchor":"#베이스-경로가-설정되지-않은-쿠사마-릴레이-체인-데이터베이스-변경"}],"content":"\n이 게시물을 읽기 전에 다음 기사를 읽는 것을 권장합니다: [\"콜레이터 노드 빌드 방법\"](/docs/how-to-build-collator-node) 및 [\"로보노믹스 콜레이터 시작 방법\"](/docs/how-to-launch-the-robonomics-collator).\n\n기사에는 로보노믹스 콜레이터 노드를 업데이트하는 데 필요한 명령어와 그 이후의 예제가 포함되어 있습니다.\n\n## **필수 명령어**\n\n0. 시작하기 전에 `root`로 로그인하는 것이 좋습니다. 그렇지 않으면 다음을 사용하는 것을 권장합니다:\n\n<code-helper copy>\n\n```shell\nsudo su -\n```\n\n</code-helper>\n\n1. 로보노믹스 서비스를 중지합니다:\n\n<code-helper copy>\n\n```shell\nsystemctl stop robonomics.service\n```\n\n</code-helper>\n\n2. 이전 버전의 로보노믹스를 제거합니다 (올바른 디렉토리에 있는지 확인하세요):\n\n<code-helper copy>\n\n```shell\nrm -f robonomics.X.X.X-ubuntu-x86_64.tar.gz\n```\n\n</code-helper>\n\n3. [최신 릴리스](https://github.com/airalab/robonomics/releases) 버전의 로보노믹스를 가져옵니다:\n\n<code-helper copy>\n\n```shell\nwget https://github.com/airalab/robonomics/releases/vX.X.X/.....\n```\n</code-helper>\n\n\n4. 파일을 추출합니다:\n\n<code-helper copy>\n\n```shell\ntar -xf robonomics-X.X.X-x86_64-unknown-linux.gnu.tar.gz\n```\n</code-helper>\n\n5. 파일을 이동합니다:\n\n<code-helper copy>\n\n```shell\nmv robonomics /usr/local/bin/\n```\n</code-helper>\n\n<robo-wiki-note type=\"note\">\n\n이 파일을 로보노믹스 노드를 설치한 올바른 디렉토리로 이동해야 합니다)\n\n</robo-wiki-note>\n\n6. 로보노믹스를 시작합니다:\n\n<code-helper copy>\n\n```shell\nsystemctl start robonomics.service\n```\n</code-helper>\n\n콜레이터 노드를 로보노믹스 v1.8.4로 업그레이드하는 예제:\n\n<code-helper>\n\n```shell\nsudo su -\ncd /home/admin\nsystemctl stop robonomics.service\nrm -f robonomics-1.7.3-x86_64-unknown-linux-gnu.tar.gz\nwget https://github.com/airalab/robonomics/releases/download/v1.8.4/robonomics-1.8.4-x86_64-unknown-linux-gnu.tar.gz\ntar -xf robonomics-1.8.4-x86_64-unknown-linux-gnu.tar.gz\nmv robonomics /usr/local/bin/\nsystemctl start robonomics.service\n\n```\n</code-helper>\n\n## **베이스 경로가 설정되지 않은 쿠사마 릴레이 체인 데이터베이스 변경**\n\n쿠사마 릴레이 체인의 특정 스냅샷은 노드에 오류를 발생시킬 수 있습니다. 이로 인해 노드가 작동을 멈출 수 있습니다. 손상된 릴레이 체인 데이터베이스로 인한 예제 오류:\n\n<code-helper>\n\n```shell\nDec 08 19:14:31 ns3159483 robonomics[1019836]: 2022-12-08 19:14:31 [Relaychain] GRANDPA voter error: could not complete a round on disk: Database\nDec 08 19:14:31 ns3159483 robonomics[1019836]: 2022-12-08 19:14:31 [Relaychain] Essential task `grandpa-voter` failed. Shutting down service.\nDec 08 19:14:32 ns3159483 robonomics[1019836]: Error: Service(Other(\"Essential task failed.\"))\nDec 08 19:14:32 ns3159483 systemd[1]: robonomics.service: Main process exited, code=exited, status=1/FAILURE\nDec 08 19:14:32 ns3159483 systemd[1]: robonomics.service: Failed with result 'exit-code'.\nec 08 19:14:33 ns3159483 robonomics[1022922]: Error: Service(Client(Backend(\"Invalid argument: Column families not opened: col12, col11, col10, col9, col8, col7, col6, col5, col4, col3, col2, col1, col0\")))\nDec 08 19:14:33 ns3159483 systemd[1]: robonomics.service: Main process exited, code=exited, status=1/FAILURE\nDec 08 19:14:33 ns3159483 systemd[1]: robonomics.service: Failed with result 'exit-code'.\n```\n</code-helper>\n\n이 오류를 수정하려면 기존의 쿠사마 릴레이 체인 데이터베이스 (일반적으로 RocksDb)를 제거하고 ParityDb와 같은 다른 Db로 대체해야 합니다. 다음 명령어를 실행하세요:\n\n1. 로보노믹스 노드 디렉토리를 찾고 파일을 확인합니다:\n\n<code-helper>\n\n```shell\ncd /home/robonomics/\nls -a\n```\n</code-helper>\n\n2. polkadot 디렉토리를 확인한 후 chains 디렉토리로 이동합니다:\n\n<code-helper>\n\n```shell\ncd /polkadot/chains/\nls -a\n```\n</code-helper>\n\n3. `ksmcc3` 디렉터리를 삭제합니다.\n\n<code-helper copy>\n\n```shell\nrm -r ksmcc3\n```\n</code-helper>\n\n4. 새로운 `ksmcc3` 디렉토리를 만듭니다.\n\n<code-helper>\n\n```shell\nmkdir ksmcc3\nchown -R robonomics:robonomics ksmcc3\ncd ksmcc3\n```\n\n</code-helper>\n\n5. 이제 새로운 스냅샷을 다운로드해야 합니다. 이 예제에서는 크게 가지치기된 릴레이 체인 스냅샷을 사용하지만 원하는 스냅샷으로 교체할 수 있습니다.\n\n<code-helper copy>\n\n```shell\nwget wget https://snaps.sik.rocks/ksm_pruned.tar.gz\n```\n\n</code-helper>\n\n6. 스냅샷이 다운로드되는 동안 새 세션을 열고 서비스 파일을 편집합니다:\n\n\n<code-helper copy>\n\n```shell\nsudo nano /etc/systemd/system/robonomics.service\n```\n\n</code-helper>\n\n데이터베이스와 가지치기와 관련된 서비스 파일 내의 줄을 수정합니다:\n\n<code-helper copy>\n\n```shell\n  --database=paritydb \\\n  --state-pruning=100 \\\n  --blocks-pruning=100 \\\n  --execution=Wasm\n```\n\n</code-helper>\n\n  \n`Ctrl + S`를 누르고 `Ctrl + X`를 눌러 서비스 파일을 저장하고 종료합니다.\n\n7. 이제 데몬을 다시로드해야 합니다.\n\n<code-helper copy>\n\n```shell\nsystemctl daemon-reload\n```\n</code-helper>\n\n\n8. 이 시간에 다른 세션에서 새로운 Db가 다운로드되었는지 확인합니다. 그런 다음 파일을 추출합니다:\n\n<code-helper copy>\n\n```shell\ntar -xvzf ksm_pruned.tar.gz\n```\n\n</code-helper>\n\n9. 압축 해제가 완료되면 다음을 실행합니다:\n\n<code-helper copy>\n\n\n```shell\nchown -R robonomics:robonomics paritydb\n```\n\n</code-helper>\n\n10. 이제 서비스를 시작하고 오류를 모니터링하고 릴레이 체인과 파라체인 모두에서 피어링되는지 확인할 수 있습니다.\n\n\n<code-helper copy>\n\n\n```shell\nsystemctl start robonomics && journalctl -fu robonomics\n```\n</code-helper>","tools":[],"fileInfo":{"path":"ko/how-to-update-collator-node-version.md","name":"how-to-update-collator-node-version"}}},"context":{}}