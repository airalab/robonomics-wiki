{"hash":"da8ceb2fc5f66fb232816172f710130b68f88fa4","data":{"doc":{"id":"4b2a9049f79266d9a83316f71a3eb535","title":"ドアが開いたときに通知を受け取る","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[{"depth":2,"value":"Telegramボットの通知","anchor":"#telegramボットの通知"},{"depth":2,"value":"ドアオープン通知","anchor":"#ドアオープン通知"}],"content":"\nこの記事では、Telegramボットの通知統合をインストールし、ドアが開いたときにTelegramアカウントに通知を送信する自動化を設定します。\n\n## Telegramボットの通知\n\n最初に、個人用のTelegramボットを作成する必要があります。これには、 [特別なTelegramボット @BotFather](https://t.me/botfather) にアクセスし、指示に従ってください。 \nHTTP APIにアクセスするためのトークンを保存してください。\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/bot-father.mp4', type:'mp4'}]\" />\n\n<robo-wiki-note type=\"warning\">\n\nトークンを**安全に**保管し、**安全に**保してください。誰でもボットを制御するために使用できます \n\n</robo-wiki-note>\n\n次のステップは、***User Chat ID*** を見つけることです。 これには次のものを使用します [GetIdsBot](https://t.me/getidsbot). \n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/get-id-bot.mp4', type:'mp4'}]\" />\n\n次に、「Telegram broadcast」統合をインストールしましょう。 この統合により、メッセージが Telegram に送信されます。\n\nRobonomics のプリインストール イメージ、Home Assistant Docker または Home Assistant Core の場合は、`configuration.yaml` を編集する必要があります。 `ssh` 経由で Raspberry Pi に接続します。\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/open-config.mp4', type:'mp4'}]\" />\n\n<code-helper additionalLine=\"rasppi_username@rasppi_hostname\" >\n\n```shell\nsudo -u homeassistant -H -s\ncd\ncd .homeassistant \nnano configuration.yaml\n```\n\n</code-helper >\n\n次の行をファイルの末尾に貼り付けます。 **bot API key**  と **your User Chat ID** を入力します。 通知サービスの名前も作成します。\n\n\n<code-helper copy >\n\n```shell\ntelegram_bot:\n  - platform: broadcast\n    api_key: <YOUR_API_KEY>\n    allowed_chat_ids:\n      -  <YOUR_USER_CHAT_ID> # 123456789  example id of a user\n      \nnotify:\n  - platform: telegram\n    name: <NOTIFIER_NAME>\n    chat_id: <YOUR_USER_CHAT_ID>\n```\n\n</code-helper >\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/insert-config.mp4', type:'mp4'}]\" />\n\n**設定を保存し、ホーム アシスタントをリロードします。**\n\nその結果、Home Assistant サービスに、あらゆるメッセージを Telegram チャットに送信するサービスが作成されます。\nホーム アシスタント Web インターフェイスの 開発者ツール メニューで確認できます。\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/telegram-result.mp4', type:'mp4'}]\" />\n\n## ドアオープン通知\n\n今度は自動化を作成します。 まず、このリンクからブループリントをホーム アシスタントにインポートします:\n\n<code-helper copy>\n\n```shell\nhttps://github.com/airalab/home-assistant-blueprints/blob/main/door-opened-notifications/door-notifications.yaml\n```\n\n</code-helper >\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/insert-blue.mp4', type:'mp4'}]\" />\n\nそして自動化を作成します:\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/create-automation.mp4', type:'mp4'}]\" />\n\nこれで、ドアが開くたびに Telegram ボットからメッセージを受信できるようになります。\n\n<robo-wiki-note type=\"okay\">\nこの自動化は、家のどのドア/窓でも使用できます。\n</robo-wiki-note>\n\n","tools":["Home Assistant 2022.11.3 https://github.com/home-assistant/core"],"fileInfo":{"path":"ja/door-notification.md","name":"door-notification"}}},"context":{}}