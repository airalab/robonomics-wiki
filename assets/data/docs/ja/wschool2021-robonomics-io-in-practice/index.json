{"hash":"9b6ae7e9c987cea6567aa322ab29833ef6e0dfdc","data":{"doc":{"id":"b8722d50ca16de4db896fffa11c203a9","title":"Lesson 3, Robonomics IOの実践","description":"","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/wschool2021-robonomics-io-in-practice.0b85c65.059ab3b9cef26ab72cb15698f2b20c92.png","size":{"width":1920,"height":1080},"sizes":"(max-width: 1920px) 100vw, 1920px","srcset":["/assets/static/wschool2021-robonomics-io-in-practice.1b91758.059ab3b9cef26ab72cb15698f2b20c92.png 480w","/assets/static/wschool2021-robonomics-io-in-practice.3df3210.059ab3b9cef26ab72cb15698f2b20c92.png 1024w","/assets/static/wschool2021-robonomics-io-in-practice.0b85c65.059ab3b9cef26ab72cb15698f2b20c92.png 1920w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1920 1080' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-46704add208c970eb66610356b30c7db'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-46704add208c970eb66610356b30c7db)' width='1920' height='1080' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAYAAAA5DDySAAAACXBIWXMAAAsSAAALEgHS3X78AAADhUlEQVRo3u2YWU9TQRTH%2bQgGUR9UBFQExbglPvkdjA/G%2bIAmxmiUaEAk7PsqoMgi%2byYoBJCCZREUWYMbvhlEZRFKKS3QhRboRvk7M1ICoYCJrWlwTnIyc2funM785pzbOeOw29UDVJ1cjsBx/yG4eZ2BWqMBFZPJBGvJ0tIS7FEcdpGFU3U9dnodACrj4gkMDo9gVDSOge8/IBoXY2R0DFLZFAaHhiGekEAilWJo%2bZ1RkQgzcvnKGNqvVKrsFoLDTufDbPHnL3nD2eMEXI6eWgOgovoFfANDUVBajqs3fJCVV4iIuCTEJKUi8WE6wmMTERIVh6DIWJRVVCEjJx8CYRNu3vVHdGIKktMy8e5jH7O1uLhofwCcDrjD2fMkvM6ew153L7gQGKsBzKrVmJTK2I7T3ZTKZJBNTUOpUkEskUChVC73yzA1PUP6pqDRzGFmRo5p9jwNtVpjvx7A4p9AcCSesGPfQbgd/w%2b/ARTCHjfPdd8AOmmqJpO5NK20rX42LevSJmrXHmBWSwC2u3AAHAAHwAFwABwAB7AxgM0OMqvbNzr4WBprqX8jO%2bsOXaQ0162xSX/kAbSkicxGaum4ayTt5glbGmNkpWmNbUuQbH283hKA0Wjc0ojBYGRJExWtVgedXv9XOYNcoWR1nU6Pufl56Im9Cckk5HIFS8CGf46yRMuSF1kVAJXm1jaMkby%2b9W0H3nZ24zUp2zq60N7Vg4ZXrWhpa4dkUor4lEdk8VoUlz1HWEwCunvfIzO3ADV1QnT29BI7byBsamHjWsmYuoYmVAteoqyyiqTLn4jdTnzp/4r07Dzkl5Shqrae2aqsEbBxFy5fQcrjTKRl5eK6jy%2bblzVS7C0BVFTX4kl%2bEe7cD2Z5f0BoJO4FhyM0Oh7%2bIRHILihG/8A3RCUk40PfZ5RXViOE9NE7A7/AMPgFhSE4MhaB4dF4kJaBwIgYVk9Jz0JCahpu%2bwUgp7CE2I1iC03PzkduUSmDUPj0GQTCRgb6ovc19lv0d275BqC%2bsXkFgE09gO6qanaWuLkBeqJanY7VF0i7OTx0pE2uUEAkFv%2bOZxL3Cwta5sI0JKgL07HMno4%2bG1YmT8NHMzfH3jUsv0NdnS6K2qBzUShV7I6B3jdQb6QeR%2b8fbB4C1rwPsIX8k4%2bgvamlv0GbeQA/CHEAHAAHwAFwABwAB8ABcAAcAAfAAWxT%2bQWv0IQ3tD%2b4EQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e"},"contributors":["KiichiSugihara"],"translated":true,"headings":[],"subtitles":[{"depth":2,"value":"必要なもの","anchor":"#必要なもの"},{"depth":3,"value":"SDS011の確認 (オプション)","anchor":"#sds011の確認-オプション"},{"depth":2,"value":"クイックスタート","anchor":"#クイックスタート"},{"depth":2,"value":"IPFSへのアクセス","anchor":"#ipfsへのアクセス"},{"depth":2,"value":"Robonomics のデータログ","anchor":"#robonomics-のデータログ"}],"content":"import Asciinema from '~/components/Asciinema.vue'\n\n## 必要なもの\n\n* Dockerが必要です、最初に[install](https://docs.docker.com/engine/install/)してください。\n* [Nova SDS011](https://aqicn.org/sensor/sds011) センサーは*オプション*です。\n\n### SDS011の確認 (オプション)\n\nSDS011センサーを接続した場合、それが`/dev`に表示され、正しいアクセス権を持っていることを確認してください。\n\n<Asciinema vid=\"WCFcx8C6M8e52UKDNei1xZloU\"/>\n\n## クイックスタート\n\nDockerのインストールが完了したら、公式リポジトリから[robonomicsのdockerイメージ](https://hub.docker.com/r/robonomics/robonomics)を起動します。このレッスンでは `winter-school `タグを使用します。\n\n<Asciinema vid=\"wM43jozIVfcRmt52ENrJ6yPlH\"/>\n\nDockerイメージの準備ができたら、`robonomics io`コマンド（SDS011デバイスを持っている場合はoptionで指定）を使ってデータを読み込んでみましょう。\n\n<Asciinema vid=\"iztt22tKGaV8wq3cMXY1oUEYv\"/>\n\nSDS011センサーがない場合は、`vsds011.sh`を使って同じDockerコンテナ内にある仮想のSDS011センサーを自由に使うことができます。続くコマンドの中では、物理的なセンサーの代わりに透過的に使用してください。\n\n\n<Asciinema vid=\"GCkSiJBA1DgpLAAHiMhIOSpgG\"/>\n\nRobonomics IO サブシステムには2種類のコマンドがあります:\n\n* `read` - 読み込みアクセスをサポートするデバイスからデータを取得する。\n* `write` - 書き込みアクセスをサポートするデバイスにデータを書き込む。\n\nデバイスによっては両方をサポートしているものもあり、その場合には両方のコマンドの引数にデバイスが表示されます。\n\n> 例えば、仮想デバイス `ipfs` は、ハッシュによる IPFS からのデータの`read`(読み取り)と、IPFS へのデータの`write`(書き込み)をサポートしています。\n\nサポートされているデバイスの全リストは、引数なしで `robonomics io read`または `robonomics io write` を実行することで得られます。\n\n## IPFSへのアクセス\n次のステップでは、IPFSデーモンの起動が必要です。そのためには、`ipfs init`を実行し、専用のターミナルタブでデーモンを起動します。\n\n<Asciinema vid=\"ir6ziXSBUDrRltTmNxg7sdXVY\"/>\n\nデーモンが起動すると、別のタブでdockerイメージを接続し、`robonomics io`を使ってデータを読み書きできるようになります。\n\n<Asciinema vid=\"ZtwcmpB9Lhum2Sc221QmNwHG4\"/>\n\nSDS011センサーのデータをIPFSに転送するには、コンソールの`｜`(パイプ)シンボルを使います。実際にやってみましょう。\n\n\n<Asciinema vid=\"XS0QESWG7f8ELsQe1bGQllb9O\"/>\n\nSDS011からのJSONデータがIPFS書き込みの入力として転送され、その結果が標準出力に出力されます。\n\nFor virtual sensor use:\n```\nvsds011.sh | robonomics io write ipfs\n```\n\nこの方法を使えば `robonomics io`ツールのプリミティブな読み取りと書き込みを組み合わせるだけで、簡単なプログラムを簡単に作ることができます。\n\n\n```bash\nrobonomics io read sds011 | gz | robonomics io write pubsub my-sensor-data\n```\n\n## Robonomics のデータログ\n\n> Robonomics[Datalog](https://crates.robonomics.network/pallet_robonomics_datalog/index.html) のターゲットはデータのブロックチェーン化です。このパレットは、カスタムデータをブロックチェーンに保存して、将来変更できないようにする機能を提供します。\n\nこのレッスンの最後の部分では、robonomicsノードを実行する必要があります。ブロックタイムが短く、あらかじめ設定された口座にすでに残高が分散されているため、開発モードが好まれます。同じコンテナ内の別のターミナルタブで起動してみましょう。\n\n<Asciinema vid=\"QnN9l0sdaZZOyK9ah0DntvCXt\"/>\n\n\nまた、`datalog`デバイスの引数としてprivateなシード値が必要です。このシード値は、取引に署名するために使用され、アカウントを送信者として提示します。組み込まれている`robonomics key`コマンドを使って生成してみましょう。\n\n\n<Asciinema vid=\"4Cdfl9F0GgjNWv1c1ZcTBBktF\"/>\n\n生成したアドレスとシード値は安全な場所に保存しておいてください。\n\n現在、アドレスの残高はゼロで、ネットワークはこのアドレスからの取引の送信を許可していません。この問題を解決するために、`Alice`アカウントからトークンを送金しましょう。https://parachain.robonomics.network の Robonomics Portal を使って、 `ws://127.0.0.1:9944`というアドレスのローカルノードに接続してみましょう。\n\n\n![portal transfer](../images/ws_lesson3/tran.jpg)\n\n\nそして、任意のデータをブロックチェーンに保存するために、`datalog`デバイスを使用することができます。`-s`keyは、アカウントの秘密シード値を設定するために使用されます。取引を行うためには、口座の残高がゼロでないことが必要です。\n\n<Asciinema vid=\"FzERH9TmFB8oRuas8ZU202Pv8\"/>\n\nすべてが正しく行われていれば、Robonomicsポータルの`Explorer`ページに`Datalog`イベントが表示されます。\n\n\n![portal datalog](../images/ws_lesson3/datalog.jpg)\n\n\n最後のステップは少し複雑ですが、このレッスンのすべての知識を使ってみるのもいいでしょう。SDS011センサー（またはファイル）からデータを収集し、それをIPFSに格納し、`datalog`トランザクションを送信してブロックチェーンにハッシュを保存する簡単なプログラムを作ってみましょう。\n\n\n```\nSDS011 -> IPFS -> Blockchain\n```\n\nRobonomics IOを使って簡単に実装できますので、やってみましょう。\n\n\n<Asciinema vid=\"MTpiawGo8DKEn081OozbYb5mU\"/>\n\nFor virtual sensor use:\n```\nvsds011.sh | robonomics io write ipfs | robonomics io write datalog -s <private_key>\n```\n\n\nうまくいけば、IPFSのハッシュを含む`Datalog`イベントが提示されるはずです。\n\n![portal datalog complex](../images/ws_lesson3/datalog_complex.jpg)\n","tools":[]}},"context":{}}