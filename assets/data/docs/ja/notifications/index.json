{"hash":"7aa239c3bcfadce6a760f54beda5c30e0b86854b","data":{"doc":{"id":"a35071f368dc83f9dd76416b8e370d69","title":"Robonomics Smart Home","description":"","contributors":["LoSk-p"],"headings":[],"subtitles":[],"content":"\nスマートホームのRobonomics\n\n![control_panel](../images/home-assistant/not_control_panel.png)\n\nあなたは[notify](https://notify.events/)でスマートフォンに通知を受け取ることができます。まずそこで登録し、`Control Panel`で新しいチャンネルを作成してください。\n\n![channel](../images/home-assistant/not_create_chanell.png)\n\nタイトルを追加して`Save`を押してください。\n\n![source](../images/home-assistant/not_add_source.png)\n\n次に`Add Source`を押して、`IoT and Smart Home`タブで`Home Assistant`を選択してください。 \n\n![source_next](../images/home-assistant/not_add_source_next.png)\n\nタイトルを書いて`Next`を押してください。\n\n![token](../images/home-assistant/not_token.png)\n\nそこにはHome Assistantの設定ファイルに追加する必要のあるトークンが表示されます。どこかに保存して`Done`を押してください。\n\n![subscribe](../images/home-assistant/not_subscribe.png)\n\n次に`Subscribe`を押して購読者を追加してください。\n\n希望する購読者を選択し、指示に従ってください。\n\n```bash\nsudo -u homeassistant -H -s\nnano ~/.homeassistant/configuration.yaml\n```\n\n今度はHome Assistantでコンピュータの設定を編集する必要があります。`homeassistant`ユーザーで`configuration.yaml`ファイルを開いてください。\n\n```yaml\nnotify_events:\n    token: <your token from notify>\n```\nそして、以下の行を追加してください。\n```yaml\n- alias: notifications\n  trigger:\n  - entity_id: binary_sensor.contact_sensor_contact\n    platform: state\n    from: 'off'\n    to: 'on'\n  action:\n  - service: notify.notify\n    data:\n      message: Door was changed to {{ states(\"binary_sensor.contact_sensor_contact\") }}\n```\n`automation:`の後に新しい自動化を追加してください。\n\nこの自動化は、エンティティIDが`binary_sensor.contact_sensor_contact`で状態が`off`から`on`に変わったときにメッセージ`Door was changed to on/off`を送信します。\n```bash\nsystemctl restart home-assistant@homeassistant.service\n```","tools":[],"fileInfo":{"path":"ja/notifications.md","name":"notifications"}}},"context":{}}