{"hash":"9180bd59dc45242b2d182c9cc740d124948d2121","data":{"doc":{"id":"eb5eba22af7f4cb3f0986b4649531572","title":"Install Sensors Connectivity on Your Own Aira","contributors":["LoSk-p","Vourhey"],"translated":false,"headings":[],"subtitles":[{"depth":2,"value":"Prerequirements","anchor":"#prerequirements"},{"depth":2,"value":"Install the Package","anchor":"#install-the-package"},{"depth":3,"value":"Edit Configuration File","anchor":"#edit-configuration-file"},{"depth":3,"value":"Run Manually","anchor":"#run-manually"},{"depth":3,"value":"Run via systemd","anchor":"#run-via-systemd"}],"content":"\n## Prerequirements\n\nYou must have an AIRA instance somewhere\n\n## Install the Package\n\n```\ngit clone https://github.com/airalab/sensors-connectivity\ncd sensors-connectivity\nnix build -f release.nix\n```\n\nFrom this point you can run the package with the default configuration file or create a systemd service to launch it automatically\n\n### Edit Configuration File\n\nAssuming you are in the package root directory edit the file:\n```\ncp config/default.json config/my.json\nvim config/my.json\n```\n\nExtended description of options is located [here](/docs/configuration-options-description)\n\n### Run Manually\n\nFrom the package directory:\n\n```\nsource result/setup.zsh\nroslaunch sensors_connectivity agent.launch config:=/root/sensors-connectivity/config/my.json\n```\n\n### Run via systemd\n\nAdd the following to `/etc/nixos/configuration.nix`:\n\n```\nsystemd.services.connectivity = {\n  requires = [ \"roscore.service\" ];\n  after = [\"roscore.service\" ];\n  wantedBy = [ \"multi-user.target\" ];\n  environment.ROS_MASTER_URI =  \"http://localhost:11311\";\n  script = ''\n    source /root/sensors-connectivity/result/setup.bash && roslaunch sensors_connectivity agent.launch config:=/root/sensors-connectivity/config/my.json\n  '';\n  serviceConfig = {\n    Restart = \"on-failure\";\n    StartLimitInterval = 0;\n    RestartSec = 60;\n    User = \"root\";\n  };\n};\n```\n\nThen\n\n```\nnixos-rebuild switch\n```\n\nRunning\n\n```\nsystemctl start connectivity.service\n```\n\n"}},"context":{}}