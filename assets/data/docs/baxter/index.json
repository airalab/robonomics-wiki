{"hash":"fd33307ffa3ee0962368bc43c43e224bb441b179","data":{"doc":{"id":"bb0fc18cf870f4e1eac6f5897385ea6c","title":"Control Baxter robot with robonomics","headings":[{"value":"Control Baxter robot with robonomics"}],"subtitles":[{"depth":1,"value":"Control Baxter robot with robonomics","anchor":"#control-baxter-robot-with-robonomics"},{"depth":2,"value":"Requirements:","anchor":"#requirements"},{"depth":2,"value":"1. Download Baxter model and controller packages","anchor":"#1-download-baxter-model-and-controller-packages"},{"depth":2,"value":"2. Create simulation world","anchor":"#2-create-simulation-world"},{"depth":2,"value":"3.Manage accounts in DAPP","anchor":"#3manage-accounts-in-dapp"},{"depth":2,"value":"4.Start simulation","anchor":"#4start-simulation"}],"content":"# Control Baxter robot with robonomics\n\nExample of how it works:\n\nhttps://youtu.be/AeufQmaNRWk\n\n## Requirements:\n - Ubuntu 18.04\n - ROS Melodic + Gazebo (installation manual [here][db2])  \n - extra packages:\n```sh\nsudo apt-get install ros-melodic-gazebo-ros-control ros-melodic-effort-controllers ros-melodic-joint-state-controller\n```\n- IPFS 0.4.22 (download from [here][db3] and install)\n- pip:\n```sh\nsudo apt install python-pip\n```\n\n\n- ipfshttpclient:\n```sh\npip install ipfshttpclient\n```\n\n\n - Robonomics node (binary file) (download latest [release][db4] here)\n - Create __Baxter__ and __Employer__ accounts  on **Robonomics Portal**  \n (you can find tutorial [\"Create an Account on Robonomics Portal\"][db6] here).\n - IPFS browser extension (not necessary)\n\n## 1. Download Baxter model and controller packages\nDownload packages:\n```sh\ncd ~\nmkdir -p robot_ws/src\ngit clone https://github.com/nakata5321/Baxter_simulation_controller.git\ncd robot_ws/src\nln -s ~/Baxter_simulation_controller/ .\ncd ..\ncatkin build\n```\nDont forget to add source command:\n```sh\necho \"source /home/$USER/robot_ws/devel/setup.bash\" >> ~/.bashrc\n```\n\n## 2. Create simulation world\nLet's start gazebo world and put our baxter in it:\n```sh\nroslaunch gazebo_ros empty_world.launch\n```\n![empty world][im1]\n\nOpen one more window in terminal:\n```sh\nrosrun gazebo_ros spawn_model -file `rospack find baxter_description`/urdf/baxter.urdf -urdf -z 1 -model baxter\n```\nYou can put some models in front of our baxter. It will be more intresting.\n![baxter][im2]\n\n## 3.Manage accounts in DAPP\n\nSince we are testing, let us create a local robonomics network with robonomics binary file. Go to folder with robonomics file and run:\n```sh\n./robonomics --dev --rpc-cors all\n```\n![robonomics][im3]\n\nDon't forget to remove `db` folder after every launch:\n```sh\nrm -rf /home/$USER/.local/share/robonomics/chains/dev/db\n```\n\nGo to [https://parachain.robonomics.network][db5] and switch to local node\n![local node][im4]\n\nGo to Accounts and transfer some money to __Baxter__ and __Employer__ accounts.\n\nYou can find The manual \"Create an Account on Robonomics Portal\" [here.][db6]\n\nAdd Baxter's secret key and adress to `configuration.txt` in `robot_ws/src/robot_controller/src/`\n\n## 4.Start simulation\n\nIn new window run:\n```sh\nifps init #you only need to do this once\nipfs daemon\n```\nOpen separate terminal and start *controller package*:\n```sh\nrosrun robot_controller robot_control.py\n```\n![waiting][im7]\n\nReturn to the first terminal, open new window and send command to [**robonomics io**][db6]. This command will turn ON your robot:\n```sh\necho \"ON\" | ./robonomics io write launch -r <CURIOSITY ADDRESS> -s <EMPLOYER’S KEY>\n```\nWhere `<CURIOSITY ADDRESS>` and `<EMPLOYER’S KEY>` are replaced with previously saved strings accordingly\n\n![rob_message][im8]\n\nYou should see the following:\n\n![working][im9]\n\nwhen the work is over go to the Robonomics Portal to `Developer > Chain state`. Choose *datalog* in **state query** and add Baxter datalog message using \"+\" button.\n\n![datalog][im10]\n\nNow the IPFS hash of the telemetry and photos is saved in the blockchain. To see the data simply copy the hash and insert it in IPFS Companion:\n\n![ipfs][im11]\n\nClick  __View on Gateway__ and that's all!\n\n![result1][im12]\n![result2][im13]\n\n[db2]: <http://wiki.ros.org/melodic/Installation>\n[db3]: <https://dist.ipfs.io/go-ipfs/v0.4.22/go-ipfs_v0.4.22_linux-386.tar.gz>\n[db4]: <https://github.com/airalab/robonomics/releases>\n[im1]: <./images/baxter_demo/empty_world.jpg>\n[im2]: <./images/baxter_demo/baxter_simulation.jpg>\n[im3]: <./images/baxter_demo/robonomics.jpg>\n[db5]: <https://parachain.robonomics.network>\n[im4]: <./images/baxter_demo/local_node.jpg>\n[im7]: <./images/baxter_demo/waiting.jpg>\n[db6]: </docs/create-account-in-dapp>\n[im8]: <./images/baxter_demo/rob_message.jpg>\n[im9]: <./images/baxter_demo/working.jpg>\n[im10]: <./images/baxter_demo/datalog.jpg>\n[im11]: <./images/baxter_demo/ipfs.jpg>\n[im12]: <./images/baxter_demo/result1.jpg>\n[im13]: <./images/baxter_demo/result2.jpg>\n"}},"context":{}}