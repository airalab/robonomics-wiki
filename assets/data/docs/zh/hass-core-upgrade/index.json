{"hash":"53abe0fd1aeba0a6e1f75f3e7657baa86d8f7363","data":{"doc":{"id":"8079822418d7a6a9a9f827c306c156e3","title":"升级您的Home Assistant Core","description":"","contributors":["PaTara43","makyul"],"headings":[],"subtitles":[{"depth":2,"value":"安装","anchor":"#安装"},{"depth":2,"value":"核实","anchor":"#核实"}],"content":"\n**本文包含使用Robonomics集成升级现有Home Assistant Core的说明。**\n\n<robo-wiki-picture src=\"home-assistant/ha_core.png\" />\n\n<robo-wiki-note type=\"warning\" title=\"DISCLAIMER\">\n\n  1. 假设您的Home Assistant Core的安装是按照[官方说明](https://www.home-assistant.io/installation/raspberrypi#install-home-assistant-core)完成的，并且存在一个<u>homeassistant</u>用户和`venv`环境。如果不是这种情况，请按照下面的说明进行操作，**但相应地编辑脚本**。\n  2. IPFS将作为一个<u>systemd</u>服务安装和运行在主机上。\n  3. 假设您已安装[Python3.9](https://www.python.org/downloads/)或更高版本。\n\n</robo-wiki-note>\n\n## 安装\n\n下载安装脚本并在终端中运行它：\n\n<code-helper additionalLine=\"rasppi_username@rasppi_hostname\">\n\n  \n```shell\nwget https://raw.githubusercontent.com/airalab/robonomics-hass-utils/main/raspberry_pi/install_integration_core.sh\nbash install_integration_core.sh\n```\n\n</code-helper>\n\n您将看到以下输出：\n\n<code-helper additionalLine=\"rasppi_username@rasppi_hostname\">\n\n\n```shell\n<...>\nhttps://raw.githubusercontent.com/airalab/robonomics-hass-utils/main/raspberry_pi/install_ipfs_arc_dependent.sh\n<...>\nIPFS daemon installed and launched, use ipfs-daemon.service to manage.\n<...>\nA    robonomics/utils.py\nChecked out revision 125.\nIntegration downloaded!\n```\n\n</code-helper>\n\n在过程中，您将被要求确认重新启动几个服务。使用`tab`进行导航，选择`yes`选项。\n  \n<robo-wiki-note type=\"note\" title=\"Error: `custom_components` exists\">\n\n  您可能会看到一个错误，如`mkdir: can't create directory 'custom_components': File exists`。这意味着您已经安装了一些自定义组件的文件夹。只需忽略此消息。\n\n</robo-wiki-note>\n  \n完成后，重新启动您的Home Assistant。\n\n## 核实\n\n检查IPFS服务是否正在运行：\n\n<code-helper additionalLine=\"rasppi_username@rasppi_hostname\">\n\n```shell\nsystemctl status ipfs-daemon.service \n```\n\n</code-helper>\n\n您将看到以下输出：\n\n<code-helper additionalLine=\"rasppi_username@rasppi_hostname\">\n\n```\n● ipfs-daemon.service - IPFS Daemon Service\n     Loaded: loaded (/etc/systemd/system/ipfs-daemon.service; enabled; preset: enabled)\n     Active: active (running) since Thu 2022-11-03 11:30:39 UTC; 14min ago\n   Main PID: 4400 (ipfs)\n      Tasks: 12 (limit: 4416)\n     Memory: 141.9M\n        CPU: 3min 5.031s\n     CGroup: /system.slice/ipfs-daemon.service\n             └─4400 /usr/local/bin/ipfs daemon\n```\n\n</code-helper>\n","tools":["Ubuntu Server 22.04.2 LTS for RaspPi https://ubuntu.com/download/raspberry-pi","Home Assistant 2023.1.7 https://github.com/home-assistant/core","Robonomics Home Assistant Integration 1.2.0 https://github.com/airalab/homeassistant-robonomics-integration","robonomics-interface 1.3.6 https://github.com/Multi-Agent-io/robonomics-interface/","IPFS 0.17.0 https://docs.ipfs.tech/"],"fileInfo":{"path":"zh/hass-core-upgrade.md","name":"hass-core-upgrade"}}},"context":{}}