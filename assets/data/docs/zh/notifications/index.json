{"hash":"17ae70ace5c127d7566de96c625c1a5e5abab879","data":{"doc":{"id":"31de3096c04e3ffb334c54991310a8ce","title":"Robonomics智能家居","description":"","contributors":["LoSk-p"],"headings":[],"subtitles":[],"content":"\n您可以通过[notify](https://notify.events/)在智能手机上接收通知。首先在那里注册并在`Control Panel`上创建新通道：\n\n![control_panel](../images/home-assistant/not_control_panel.png)\n\n添加标题并按`Save`：\n\n![channel](../images/home-assistant/not_create_chanell.png)\n\n然后按`Add Source`并在`IoT and Smart Home`选项卡中选择`Home Assistant`：\n\n![source](../images/home-assistant/not_add_source.png)\n\n编写标题并按`Next`：\n\n![source_next](../images/home-assistant/not_add_source_next.png)\n\n在那里您将看到您需要添加到Home Assistant配置文件中的令牌。将其保存在某个地方并按`Done`：\n\n![token](../images/home-assistant/not_token.png)\n\n然后按`Subscribe`以添加订阅者：\n\n![subscribe](../images/home-assistant/not_subscribe.png)\n\n选择您想要的任何订阅者并按照说明操作。\n\n现在您需要在计算机上使用Home Assistant编辑配置。在`homeassistant`用户下打开`configuration.yaml`文件：\n\n```bash\nsudo -u homeassistant -H -s\nnano ~/.homeassistant/configuration.yaml\n```\n\n并添加以下行：\n\n```yaml\nnotify_events:\n    token: <your token from notify>\n```\n在`automation:`行之后还要添加新的自动化：\n```yaml\n- alias: notifications\n  trigger:\n  - entity_id: binary_sensor.contact_sensor_contact\n    platform: state\n    from: 'off'\n    to: 'on'\n  action:\n  - service: notify.notify\n    data:\n      message: Door was changed to {{ states(\"binary_sensor.contact_sensor_contact\") }}\n```\n此自动化将在传感器实体ID`binary_sensor.contact_sensor_contact`状态从`off`更改为`on`时发送消息`Door was changed to on/off`。\n\n然后重新启动Home Assistant：\n```bash\nsystemctl restart home-assistant@homeassistant.service\n```","tools":[],"fileInfo":{"path":"zh/notifications.md","name":"notifications"}}},"context":{}}