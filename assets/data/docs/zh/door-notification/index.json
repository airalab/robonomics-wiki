{"hash":"448caa13a6c2c9753fa72bcda71d6dba7a5bd610","data":{"doc":{"id":"5f77629302c61d8117635438011c1cc7","title":"当门打开时收到通知","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[{"depth":2,"value":"Telegram机器人通知","anchor":"#telegram机器人通知"},{"depth":2,"value":"门打开通知","anchor":"#门打开通知"}],"content":"\n在本文中，您将安装Telegram机器人通知集成并配置自动化，当门打开时，将向您的Telegram帐户发送通知。\n\n## Telegram机器人通知\n\n首先，您需要创建一个个人的Telegram机器人。为此，请转到 [特殊的Telegram机器人 @BotFather](https://t.me/botfather) 并按照说明进操作。 \n保存您的令牌以访问HTTP API。\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/bot-father.mp4\" />\n\n<robo-wiki-note type=\"warning\">\n\n保持您的令牌**安全**并将其**安全地**存储起来，任何人都可以使用它来控制您的机器人。 \n\n</robo-wiki-note>\n\n下一步是找到您的 ***User Chat ID***. 为此，请使用下一个 [GetIdsBot](https://t.me/getidsbot). \n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/get-id-bot.mp4\" />\n\n现在让我们安装\"Telegram broadcast\"集成。此集成将向您的Telegram发送消息。\n\n对于预安装了Robonomics镜像、Home Assistant Docker或Home Assistant Core的用户，您需要编辑`configuration.yaml`文件。通过`ssh`连接到您的Raspberry Pi：\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/open-config.mp4\" />\n\n<code-helper additionalLine=\"rasppi_username@rasppi_hostname\" >\n\n```shell\nsudo -u homeassistant -H -s\ncd\ncd .homeassistant \nnano configuration.yaml\n```\n\n</code-helper >\n\n将下面的行粘贴到文件末尾。插入您的 **bot API key** 和**your User Chat ID**. 还要为您的通知服务创建一个名称：\n\n\n<code-helper copy >\n\n```shell\ntelegram_bot:\n  - platform: broadcast\n    api_key: <YOUR_API_KEY>\n    allowed_chat_ids:\n      -  <YOUR_USER_CHAT_ID> # 123456789  example id of a user\n      \nnotify:\n  - platform: telegram\n    name: <NOTIFIER_NAME>\n    chat_id: <YOUR_USER_CHAT_ID>\n```\n\n</code-helper >\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/insert-config.mp4\" />\n\n**保存配置并重新加载Home Assistant。**\n\n\n结果是，在您的Home Assistant服务中将创建一个服务，该服务将向您的Telegram聊天发送任何消息。 \n您可以在Home Assistant Web界面的开发者工具菜单中进行检查。 \n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/telegram-result.mp4\" />\n\n##  门打开通知\n\n现在是时候创建自动化了。首先，您从此链接导入蓝图到您的Home Assistant中：\n\n<code-helper copy>\n\n```shell\nhttps://github.com/airalab/home-assistant-blueprints/blob/main/door-opened-notifications/door-notifications.yaml\n```\n\n</code-helper >\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/insert-blue.mp4\" />\n\n然后创建自动化：\n\n<robo-wiki-video controls src=\"https://static.robonomics.network/wiki/create-automation.mp4\" />\n\n现在，每次门打开时，您都会收到来自Telegram机器人的消息。\n\n<robo-wiki-note type=\"okay\">\n您可以将此自动化用于家中的任何门窗。\n</robo-wiki-note>\n\n","tools":["Home Assistant 2022.11.3 https://github.com/home-assistant/core"],"fileInfo":{"path":"zh/door-notification.md","name":"door-notification"}}},"context":{}}