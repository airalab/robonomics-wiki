{"hash":"fa7c5ad162a377c5f8e516ac924d542acdfc726e","data":{"doc":{"id":"504901d5ea7ac566fc0b2e8714adeb4c","title":"MQTT Setup and Home Assistant Init","description":"","contributors":["nakata5321","PaTara43"],"translated":true,"headings":[],"subtitles":[{"depth":2,"value":"Install MQTT broker","anchor":"#install-mqtt-broker"},{"depth":2,"value":"Home Assistant Initial Configuration","anchor":"#home-assistant-initial-configuration"},{"depth":2,"value":"Add MQTT Integration","anchor":"#add-mqtt-integration"},{"depth":2,"value":"Connect Zigbee devices to your Home Assistant","anchor":"#connect-zigbee-devices-to-your-home-assistant"},{"depth":3,"value":"Option 1 (with zigbee2MQTT)","anchor":"#option-1-with-zigbee2mqtt"},{"depth":3,"value":"Option 2 (with SLS Gateway)","anchor":"#option-2-with-sls-gateway"}],"content":"\n**Being on this page means that you have installed Home Assistant with Robonomics and IPFS and yet don't have any\nZigbee devices connected. To do so, you first need a MQTT broker to be set up and MQTT integration to be configured.**\n\n\n## Install MQTT broker\n\nThere is a quick installation option with a pre-written script:\n\n```shell\ncurl -O https://raw.githubusercontent.com/airalab/robonomics-hass-utils/main/raspberry_pi/mqtt-install.sh\nbash mqtt-install.sh\n```\n\nYou will be asked to insert **USERNAME** and **PASSWORD** for Broker.\n\nYou have installed MQTT broker to your host (it's now running as a `systemd` service). If you had your existing Home Assistant OS, Core or Docker augmented with\nRobonomics, proceed directly to [MQTT integration configuration](#add-mqtt-integration). If not, and you are setting up a whole\nnew Home Assistant, activate it with the below-mentioned steps.\n\n## Home Assistant Initial Configuration\n\nAlright, you made it here. The tough part is done.\n\nWith Home Assistant installed, it’s time to configure it. Here you will create the owner account of Home Assistant. \nThis account will be an administrator and will always be able to change everything. Open web browser and go to \n`http://%RASPBERRY_IP_ADDRESS%:8123`(RASPBERRY_IP_ADDRESS you have found in previous [article](/docs/home-assistant-x-robonomics)).\n\n<robo-wiki-note type=\"note\">Raspberry Pi address may change in time, due router settings</robo-wiki-note>\n\nAt the first page, enter a name, username, password and click on “create account”.\n\n<robo-wiki-picture src=\"home-assistant/username.jpg\" alt=\"create user\" />\n\nNext, you can enter a name for your home and set your location and unit system. Click “DETECT” to find your location and set your time zone and unit system based on that location.\nIf you’d rather not send your location, you can set these values manually.\n\n<robo-wiki-picture src=\"home-assistant/location.jpg\" alt=\"set location\" />\n\nOnce you are done, click Next. In this screen, Home Assistant will show any devices that it has discovered on your network.\nDon’t be alarmed if you see fewer items than what is shown below; you can always manually add devices later.\n\n<robo-wiki-picture src=\"home-assistant/add-devices.jpg\" alt=\"additional devices\" />\n\nFinally, click Finish. Now you’re brought to the Home Assistant web interface.\nThis screen will show all of your devices. So let’s get that screen filled up!\n\n## Add MQTT Integration\n\nNow, you should install MQTT client. For this go to `Settings` -> `devices & Services`.\n\n<robo-wiki-picture src=\"home-assistant/settings.jpg\" alt=\"settings screen\" />\n\nAnd press `ADD INTEGRATION` at the right bottom corner. In the opened window find `MQTT`:\n\n<robo-wiki-picture src=\"home-assistant/mqtt.jpg\" />\n\nPress on it and set up your broker address - `localhost`, port - `1883` \nand your username and password, which you've created earlier, then press `submit`:\n\n<robo-wiki-picture src=\"home-assistant/mqtt-setup.jpg\" />\n\nThen press on three dots on MQTT integration and choose `System Options` and check if automatically adding new devices is enabled:\n\n<robo-wiki-picture src=\"home-assistant/add-dev.jpg\" />\n\n\n## Connect Zigbee devices to your Home Assistant\n\nNow it's time to add some devices to your smart home. Depending on the hardware you have, pick one of the options:\n\n### Option 1 (with zigbee2MQTT)\n* If you have Zigbee adapter [JetHome USB JetStick Z2](https://jethome.ru/z2/)\n(or one of [supported](https://www.zigbee2mqtt.io/information/supported_adapters.html)) go [**here.**](/docs/zigbee-to-mqtt/)\n\n### Option 2 (with SLS Gateway)\n* If you have [Robonomics SLS Gateway](https://easyeda.com/ludovich88/robonomics_sls_gateway_v01) go [**here.**](/docs/sls-gateway/)\n\n","tools":["Mosquitto Broker 2.0.11 https://mosquitto.org/"],"fileInfo":{"path":"en/mqtt-and-hass-setup.md","name":"mqtt-and-hass-setup"}}},"context":{}}