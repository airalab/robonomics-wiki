{"hash":"e07834b7c9d5fbd855c8bb0eb62176355bee4599","data":{"doc":{"id":"1728cb019b80fdaa683459a0197ec16c","title":"Control Kuka manipulator with robonomics","description":"","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/kuka.0b85c65.9c21b0c9f4a90b1f1484fab44db5d406.png","size":{"width":1920,"height":1080},"sizes":"(max-width: 1920px) 100vw, 1920px","srcset":["/assets/static/kuka.1b91758.9c21b0c9f4a90b1f1484fab44db5d406.png 480w","/assets/static/kuka.3df3210.9c21b0c9f4a90b1f1484fab44db5d406.png 1024w","/assets/static/kuka.0b85c65.9c21b0c9f4a90b1f1484fab44db5d406.png 1920w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1920 1080' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-16a3c12bd3ef5cfbbb4b5668dc3f6d15'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-16a3c12bd3ef5cfbbb4b5668dc3f6d15)' width='1920' height='1080' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAYAAAA5DDySAAAACXBIWXMAAAsSAAALEgHS3X78AAAD8UlEQVRo3u2YWU9TQRTH%2bQjG9UFFQMUN45b45HfQBxOjwd0IiguKERFxgWLZxH3FqAiiyKKsIigqghQoUllEKWCliy1tKbYEKGn5OzO0iFCphoIF7yQnd%2b6dmXPv/c2ZOXOOy3T3haAy1W0BJs%2beBw%2bvVdAbDKDFbDbDUaW3txfOWFymkR%2bn4r5k5RAAtEhlcoibmiFpkaL%2bcwNapDI0S75CqWqFuLEJMrkCCqUSjZY%2bkpYWaLTa/jG0Xadrd1oILlNc57OfX7thM1wXLoPb4hW/AEh6nAr/wGDE3UvA1t1%2buHLzNk7yIhAaEQP%2buYsICePj%2bGkejp0Kw/2kZFy6fgvpmTnwORCAM/xoRJ2/jHdlFUyXyWRyPgBT53jCddFyeK1eg5meXnAjMAYC%2bK7X45tSxWaczqZSpYKqVQ1deztkCgXadDpLuwqtag1pa4XB0AGNRgs1u1dDrzc4rwWw9U8gTCaWMGnWXHgs/Q/3AAphhseiIXsA/WgqZrP1au5/NvDebJHeYcSpLcAqtgBM9MIB4ABwADgAHICxAjDQHf6JaxzcfzTcqV0A1NfTI6wt/2%2btW/v0nwtstP/uDDFsnYjJ9FO3LT2jCsCRJ8FxuQRoETc2I%2bd5AQwdHeju7kZnZyeavkig1bah22iEXPENzeS%2bRFDGIkU6W58axOjq6mLjG0jEWFf/CcIqERlvZKLWaPCVRIqdlj5Un4bo07bpIJXLYTQa2btonzJhJQmmyiF8L0Kl6AOLSAcvo1EFcDs%2bEfEkyqOR38GjxxFEIj9f/yMIPBlKokI%2b/A4HIjM3D%2bs2bsG1uDs4FR4J752%2bCIuMQXBoOO4mJGG7737sPxKEbT77cOjYCQSRyJE%2b2xcQiMjYS6wtICgEW3bvZXpp9Mk/d4GB27TDB9679hBdZ7HLz5%2b87yiqPtQ4zELtAqD5gKKSUggqhHhVVMxm9O07Ad6LqlFRWYWXr4tYVCiqrkFxaRmeZOWghFwLCl/j%2bYtClh8oJeEw7Zv2NIu11X6sx/mrN/A0Oxd5BS/xLP8F60%2blRFCO7Lx8NtPUmgTlQlQR3XQM/Y7q2joWfTpqM7QLgCY1PosbWb1vGRiHVdhFTHcsiqM8gV0ANAGy3ns7Yi9f71sCxHxpkoMmRHhRsYggSyM8OpYlP0J4fcmRuLv3cfpsFArfvGU6enp6YLJ4ir6r%2bRcPY0usuz3ta8vTjJkF0M0rLSMLKU8yWHYoMTkFj1LT8TAlnf3gg%2bRU8jyN1bOf5SPxUQrbEx6nZzCzH7xW//Ys8E%2b9gCM2GWc/Tf7RQWgk4uwQ7AIYqYx7AFwwxAHgAHAAOAAcAA4AB4ADwAHgAEzI8gMri2CyWTHEFQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e"},"contributors":["LoSk-p"],"translated":true,"headings":[],"subtitles":[{"depth":2,"value":"Requirements","anchor":"#requirements"},{"depth":2,"value":"Installation","anchor":"#installation"},{"depth":2,"value":"Running gazebo model","anchor":"#running-gazebo-model"},{"depth":2,"value":"Running robonomics","anchor":"#running-robonomics"},{"depth":2,"value":"Running ipfs","anchor":"#running-ipfs"},{"depth":2,"value":"Running control package","anchor":"#running-control-package"},{"depth":2,"value":"Sending transaction","anchor":"#sending-transaction"},{"depth":2,"value":"Troubleshooting","anchor":"#troubleshooting"}],"content":"\nVideo with an example of work can be found here:\n\nhttps://youtu.be/z55HepXbHr8\n\n***\n\n## Requirements\n* ROS melodic, Gazebo (installation instraction [here](http://wiki.ros.org/melodic/Installation/Ubuntu))\n* Some extra packages\n```bash\nsudo apt-get install ros-melodic-gazebo-ros-control ros-melodic-effort-controllers ros-melodic-joint-state-controller\n```\n* IPFS 0.4.22 (download from [here](https://www.npackd.org/p/ipfs/0.4.22) and install)\n```bash\ntar -xvzf go-ipfs_v0.4.22_linux-386.tar.gz\ncd go-ipfs/\nsudo bash install.sh\nipfs init\n```\n* pip3\n```bash\nsudo apt-get install python3-pip\n```\n* ipfshttpclient\n```bash\npip3 install ipfshttpclient\n```\n* substrate-interface\n```bash\npip3 install substrate-interface\n```\n* Robonomics node (binary file) (download latest release [here](https://github.com/airalab/robonomics/releases))\n* IPFS browser extension (not necessary)\n***\n## Installation\nInstall Kuka manipulator and control packages\n```bash\ncd catkin_wc/src/\ngit clone https://github.com/orsalmon/kuka_manipulator_gazebo\ngit clone https://github.com/LoSk-p/kuka_controller\ncd ..\ncatkin_make\n```\n***\n## Running gazebo model\n```bash\nsource ~/catkin_ws/devel/setup.bash\nroslaunch manipulator_gazebo manipulator_empty_world.launch\n```\nIn a new window\n```bash\nsource ~/catkin_ws/devel/setup.bash\nrosrun manipulator_gazebo move_arm_server\n```\n![model](../images/kuka-demo/1.png)\n***\n## Running robonomics\nGo to the folder with robonomics file ad create a local robonomics network:\n```bash\n./robonomics --dev --tmp\n```\n\n![robonomics](../images/kuka-demo/robonomics.png)\n\nGo to [Robonomics Parachain portal](https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/) and switch to local node\n\n![local](../images/kuka-demo/local.png)\n\nThen go to Accounts and create `KUKA` account. Save account's mnemonic key, you will need it later. \n\n![acc](../images/kuka-demo/create_acc.png)\n\nSend some units to the new account from one of default accounts.\n\n![accs](../images/kuka-demo/send_money.png)\n***\n## Running ipfs\nRun ipfs daemon:\n```bash\nipfs daemon\n```\n***\n## Running control package\nIn config directory in kuka_control package you need to create config file with this lines, where `<your_mnemonic>` is saved mnemonic seed:\n```bash\n{\n    \"kuka_mnemonic\": \"<your_mnemonic>\",\n    \"node\": \"ws://127.0.0.1:9944\"\n}\n```\n\nNow you can run control script:\n```bash\nsource ~/catkin_ws/devel/setup.bash\nrosrun kuka_controller move_arm_client.py\n```\n![control](../images/kuka-demo/run.png)\n\n## Sending transaction\nIn [Robonomics Parachain portal](https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/) go to `Developer/Extrinsics`, change `extrinsic` to `launch`. Chose your `KUKA` account in `robot` and change `param` to `Yes`. The press `Submit Transaction`\n\n![transaction](../images/kuka-demo/launch.png)\n\nIn the window with kuka_control package you will see:\n\n![done](../images/kuka-demo/res.png)\n\nThen go `Developer/Chain State` on the Robonomics portal, select `datalog` and `datalogItem((AccountId,u64)): RingBufferItem` in query and add `KUKA` datalog with button '+':\n\n![datalog](../images/kuka-demo/datalog.png)\n\nNow you can find robot's telemetry in IPFS via this link with your hash `https://gateway.ipfs.io/ipfs/<hash>`.\n\n## Troubleshooting\n\nIf `catkin_make` doesn't work with the message that it can't find MoveArm.h, try to remove last four lines in CMakeLists.txt in kuka_manipulator_gazebo package:\n```\ninclude_directories(include ${catkin_INCLUDE_DIRS})\n\nadd_executable(move_arm_server src/move_arm_server.cpp)\ntarget_link_libraries(move_arm_server ${catkin_LIBRARIES})\nadd_dependencies(move_arm_server beginner_tutorials_gencpp)\n```\nDo `catkin_make` without these lines, then returm them and do `catkin_make` again.\n"}},"context":{}}