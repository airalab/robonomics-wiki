{"hash":"5a3268fc52e0f7185f77fad8dffb53b768d5d795","data":{"doc":{"id":"d29a5b1c948b532cc27df7da6ad2c79c","title":"Відповідальність","description":"","contributors":["PaTara43"],"headings":[],"subtitles":[{"depth":2,"value":"Огляд теорії","anchor":"#огляд-теорії"},{"depth":3,"value":"Переговори","anchor":"#переговори"},{"depth":3,"value":"Підписи","anchor":"#підписи"},{"depth":2,"value":"Створити відповідальність","anchor":"#створити-відповідальність"},{"depth":3,"value":"Підготовка","anchor":"#підготовка"},{"depth":3,"value":"1. Створіть три облікові заиси та додайте кошти на них","anchor":"#1-створіть-три-облікові-заиси-та-додайте-кошти-на-них"},{"depth":3,"value":"1. Перейдіть до Developer -> Extrinsics","anchor":"#1-перейдіть-до-developer---extrinsics"},{"depth":3,"value":"2. Виберіть liability -> create зі списку можливих екстриксів","anchor":"#2-виберіть-liability---create-зі-списку-можливих-екстриксів"},{"depth":3,"value":"3. Відправити транзакцію","anchor":"#3-відправити-транзакцію"},{"depth":3,"value":"4. Перегляньте свою відповідальність у подіях","anchor":"#4-перегляньте-свою-відповідальність-у-подіях"},{"depth":3,"value":"5. Дослідження сховища","anchor":"#5-дослідження-сховища"},{"depth":2,"value":"Звіти","anchor":"#звіти"},{"depth":3,"value":"1. Перейдіть до extrinsics, liability -> finalize(report)","anchor":"#1-перейдіть-до-extrinsics-liability---finalizereport"},{"depth":3,"value":"2. Досліджуйте звіти","anchor":"#2-досліджуйте-звіти"},{"depth":3,"value":"3. Перевірте баланси","anchor":"#3-перевірте-баланси"}],"content":"\n**Щоб перетворити роботів на економічних агентів, потрібен інструмент договору. Знайомтеся з Liability - палеткою Robonomics, яка реалізує контракти між рахунками парачейну!**\n\n<robo-wiki-note type=\"warning\" title=\"Dev Node\">\n\n  Зверніть увагу, що цей посібник демонструється на локальному екземплярі Robonomics Node. Налаштуйте свій за допомогою [цієї інструкції](/docs/run-dev-node).\n\n</robo-wiki-note>\n\n## Огляд теорії\n\nНа Ethereum існувала досить складна структура взаємодії відповідальності. Ви можете ознайомитися з нею [тут](/docs/robonomics-how-it-works). Зараз речі трохи спрощені з Kusama!\n\n### Переговори\n\nДля підписання контракту сторони повинні спочатку домовитися. Це можна зробити кількома способами, зокрема [IPFS PubSub ](https://blog.ipfs.tech/25-pubsub/) або Robonomics PubSub. Зразок коду Python із використанням Robonomics PubSub представлено [тут](https://multi-agent-io.github.io/robonomics-interface/usage.html#pubsub). \n\nПропозиція та попит - це повідомлення, що містять дві основні характеристики контракту: **опис роботи** та **ціна**. Формат повідомлення повинен бути розроблений користувачем для кожної конкретної програми. У процесі переговорів необов'язково дотримуватися жорсткого правила формату. Можливий потік представлений на наступному малюнку.\n\n<robo-wiki-picture src=\"liability/negotiations.jpg\" />\n\n<robo-wiki-note type=\"warning\" title=\"PubSub\">\n\n  Зверніть увагу, що PubSub - це відкритий протокол, тому немає потреби передавати конфіденційні дані. Для цього слід використовувати інші протоколи.\n\n</robo-wiki-note>\n\n\n### Підписи\n\nПісля успішного завершення переговорів кожна сторона повинна підписати свою так звану угоду, яка називається підписом. Це повідомлення, що містить опис роботи та ціну **в певному форматі**, підписане закритим ключем облікового запису. Для цього також існує [Python-Tool](https://multi-agent-io.github.io/robonomics-interface/modules.html#robonomicsinterface.Liability.sign_liability).\n - Опис роботи називається **технікою**. Це рядок довжиною 32 байти, який може бути закодованим IPFS CID.\n - Ціна називається **економікою**. Це десяткове число XRT - Вейнер. 1 Вейнер = 10**-9 XRT.\n\n<robo-wiki-note type=\"note\" title=\"32 bytes\">\n\n  Можна отримати [IPFS](https://ipfs.tech/) CID у правильному форматі за допомогою [бібліотеки Python](https://multi-agent-io.github.io/robonomics-interface/modules.html#robonomicsinterface.utils.ipfs_qm_hash_to_32_bytes).\n  При використанні функції `sign_liability` немає потреби перетворювати хеш, це буде зроблено автоматично.\n\n</robo-wiki-note>\n\nЗа прикладом з кавою:\n\n1. Завдання - це JSON\n```json\n{\"task\": \"make_espresso\", \"description\": \"Make one cup of espresso\"}\n```\n2. Його IPFS CID - `QmP17mWKtQtq2Gq6qZAggPRrho3sVjQGBpXZ8KZiQ57FDi`\n3. Таким чином, **техніка** (перетворений CID) - `0x09daaa8055722a6894951b1273e807f8a46628efeec46805f0228ace230bd5a9` \n4. **Економіка** - `1.5 XRT`.\n\nПісля підписання настав час створити відповідальність! Це може зробити одна зі сторін (або обіцяючий, або обіцяний) або обліковий запис третьої сторони, так званого постачальника.\n\n## Створити відповідальність\n\n### Підготовка\n\nЯк вже зазначалося раніше, у процесі задіяні принаймні дві сторони. Для цього прикладу використовуємо три і створимо окремого постачальника. Припустимо, що переговори вже відбулися якимось чином.\n\n### 1. Створіть три облікові заиси та додайте кошти на них\n\n<robo-wiki-picture src=\"liability/balances.jpg\" />\n\nТут ми надали постачальнику 100 XRT для підписування екстриксів відповідальності, обіцяючому було надано 2 XRT для оплати роботи.\nОбіцяний не отримав жодних коштів (крім існуючого депозиту, що становить принаймні 1 мXRT).\n\n### 1. Перейдіть до Developer -> Extrinsics\n\n<robo-wiki-picture src=\"liability/extrinsics.jpg\" />\n\n### 2. Виберіть liability -> create зі списку можливих екстриксів\n\nТакож виберіть обліковий запис, з яким ви хочете подати екстрикс. Заповніть всі параметри.\n\n<robo-wiki-picture src=\"liability/create.jpg\" />\n\n<robo-wiki-note type=\"note\" title=\"Signatures\">\n\n  Оскільки тут використовується постачальник, не потрібно знати насіння учасників. Потрібні лише їх підписи.\n\n</robo-wiki-note>\n\n### 3. Відправити транзакцію\n\n<robo-wiki-picture src=\"liability/submit.jpg\" />\n\n### 4. Перегляньте свою відповідальність у подіях\n\nДля цього перейдіть до `Network -> Explorer` та знайдіть список подій справа. Клацніть на трикутник, щоб розгорнути.\n\n<robo-wiki-picture src=\"liability/new-liability.jpg\" />\n\n<robo-wiki-note type=\"note\" title=\"Hash\">\n\n  Хеш можна перетворити на IPFS CID за допомогою того самого [інструмента Python](https://multi-agent-io.github.io/robonomics-interface/modules.html#robonomicsinterface.utils.ipfs_32_bytes_to_qm_hash).\n\n</robo-wiki-note>\n\n### 5. Дослідження сховища\n\nВи також можете досліджуват деякі характеристики відповідальностей у модулі сховища `liability`.\n\n<robo-wiki-picture src=\"liability/storage-liability.jpg\" />\n\n<robo-wiki-note type=\"note\" title=\"Next Index\">\n\n  Функція сховища `Next Index` показує останній індекс відповідальності +1, тому навіть якщо він дорівнює `1`, відповідальність `0` досліджується.\n\n</robo-wiki-note>\n\n## Звіти\n\nУявіть, що кава була приготована, і тепер кавоварка повинна якось про це повідомити. Ось де з'являються звіти про відповідальність. Як доказ праці, рахунок додає ще один IPFS CID як зміст звіту при завершенні існуючої відповідальності. Це знову вимагає підпису обіцяючого.\n\n<robo-wiki-note type=\"note\" title=\"Report signature\">\n\n  Підписане повідомлення містить індекс існуючого зобов'язання та код IPFS CID звіту, закодований у 32-байтовому представленні. Ще раз, [інструмент Python](https://multi-agent-io.github.io/robonomics-interface/modules.html#robonomicsinterface.Liability.sign_report) може допомогти підписати звіт.\n\n</robo-wiki-note>\n\nПродовжуючи приклад з кавоваркою:\n\n1. Звіт - це JSON\n```json\n{\"report\": \"Coffee made! Time to execute - 80 seconds.\"}\n```\n2. Його IPFS CID - `QmeXCrBuv6cw825JJfSWqNVv28AyjJZW9KReN9wcLQjfCm`\n3. Таким чином, **корисне навантаження** (трансформований CID) є `0xf06f2394f55537a5f37d63fd72bfbef50e9f60ea9e0e34224e455afae27a97a2`\n4. **Індекс** - `0`, це існуючий індекс зобов'язання.\n\n### 1. Перейдіть до extrinsics, liability -> finalize(report)\n\nЗаповніть параметри та надішліть зовнішній. Знову ж таки, це можна зробити за допомогою стороннього облікового запису.\n\n<robo-wiki-picture src=\"liability/report.jpg\" />\n\n<robo-wiki-note type=\"warning\" title=\"Existential deposit\">\n\n  Зверніть увагу, що рахунок обіцяючого не повинен бути \"мертвим\" - він повинен мати існуючий депозит не менше 1 мXRT.\n\n</robo-wiki-note>\n\nПідпишіть та надішліть звіт. Після завершення ви можете дослідити його в подіях.\n\n<robo-wiki-picture src=\"liability/new-report.jpg\" />\n\n### 2. Досліджуйте звіти\n\nВи також можете спостерігати за звітом у сховищі. Перейдіть до `Developer -> Storage` та виберіть `liability` зі списку.\n\n<robo-wiki-picture src=\"liability/storage-report.jpg\" />\n\n### 3. Перевірте баланси\n\nНа зображенні показано, що тепер обіцяючий отримав \"зарплату\". Економічні відносини стали можливими!\n\n<robo-wiki-picture src=\"liability/balances-2.jpg\" />\n\n\n<robo-wiki-note type=\"note\" title=\"Verifying\">\n\n  Наразі немає способу перевірити, що робота виконана, тому як тільки обіцяючий повідомляє, токени перекладаються на його рахунок. \n  Функцію перевірки планується додати у майбутньому.\n\n</robo-wiki-note>","tools":["Robonomics 2.3.0 https://github.com/airalab/robonomics","robonomics_interface 1.3.5 https://github.com/Multi-Agent-io/robonomics-interface"],"fileInfo":{"path":"uk/liability.md","name":"liability"}}},"context":{}}