{"hash":"b019132cdf18eb9f78219b0565b919b16f679c3f","data":{"doc":{"id":"e1a624a02d1b651c30182f01531c52ed","title":"Отримуйте сповіщення, коли двері відкриті","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[{"depth":2,"value":"Сповіщення від бота Telegram","anchor":"#сповіщення-від-бота-telegram"},{"depth":2,"value":"Сповіщення про відкриття дверей","anchor":"#сповіщення-про-відкриття-дверей"}],"content":"\nУ цій статті ви встановите інтеграцію з ботом Telegram та налаштуєте автоматизацію, яка буде надсилати вам сповіщення на ваш обліковий запис Telegram, коли двері відкриті.\n\n## Сповіщення від бота Telegram\n\nСпочатку вам потрібно створити особистого бота Telegram. Для цього перейдіть на [спеціального бота Telegram @BotFather](https://t.me/botfather) та слідуйте інструкціям. \nЗбережіть свій токен для доступу до HTTP API.\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/bot-father.mp4', type:'mp4'}]\" />\n\n<robo-wiki-note type=\"warning\">\n\nЗберігайте свій токен **безпечно** і зберігайте його **надійно**, його може використовувати будь-хто для керування вашим ботом \n\n</robo-wiki-note>\n\nНаступним кроком є знаходження вашого ***User Chat ID***. Для цього використовуйте наступне [GetIdsBot](https://t.me/getidsbot). \n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/get-id-bot.mp4', type:'mp4'}]\" />\n\nТепер давайте встановимо інтеграцію \"Telegram broadcast\". Ця інтеграція буде надсилати повідомлення на ваш Telegram.\n\nДля попередньо встановленого зображення Robonomics, Docker Home Assistant або Home Assistant Core вам потрібно відредагувати `configuration.yaml`. Підключіться до Raspberry Pi через `ssh`:\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/open-config.mp4', type:'mp4'}]\" />\n\n<code-helper additionalLine=\"rasppi_username@rasppi_hostname\" >\n\n```shell\nsudo -u homeassistant -H -s\ncd\ncd .homeassistant \nnano configuration.yaml\n```\n\n</code-helper >\n\nВставте наступні рядки в кінець файлу. Вставте ваш **bot API key** та **your User Chat ID**. Також створіть назву для вашого сервісу повідомлень:\n\n\n<code-helper copy >\n\n```shell\ntelegram_bot:\n  - platform: broadcast\n    api_key: <YOUR_API_KEY>\n    allowed_chat_ids:\n      -  <YOUR_USER_CHAT_ID> # 123456789  example id of a user\n      \nnotify:\n  - platform: telegram\n    name: <NOTIFIER_NAME>\n    chat_id: <YOUR_USER_CHAT_ID>\n```\n\n</code-helper >\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/insert-config.mp4', type:'mp4'}]\" />\n\n**Збережіть конфігурацію та перезавантажте Home Assistant.**\n\n\nВ результаті в сервісі Home Assistant буде створено сервіс, який буде надсилати будь-яке повідомлення в чат Telegram з вами. \nВи можете перевірити це в меню Інструменти розробника на веб-інтерфейсі Home Assistant. \n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/telegram-result.mp4', type:'mp4'}]\" />\n\n##  Сповіщення про відкриття дверей\n\nТепер час створити автоматизацію. Спочатку імпортуйте шаблон до вашого Home Assistant з цього посилання:\n\n<code-helper copy>\n\n```shell\nhttps://github.com/airalab/home-assistant-blueprints/blob/main/door-opened-notifications/door-notifications.yaml\n```\n\n</code-helper >\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/telegram-result.mp4', type:'mp4'}]\" />\n\nІ створіть автоматизацію:\n\n<robo-wiki-video controls :videos=\"[{src: 'https://static.robonomics.network/wiki/create-automation.mp4', type:'mp4'}]\" />\n\nТепер ви будете отримувати повідомлення від бота Telegram кожного разу, коли двері відкриті.\n\n<robo-wiki-note type=\"okay\">\nВи можете використовувати цю автоматизацію з будь-якими дверима/вікнами у вашому домі.\n</robo-wiki-note>\n\n","tools":["Home Assistant 2022.11.3 https://github.com/home-assistant/core"],"fileInfo":{"path":"uk/door-notification.md","name":"door-notification"}}},"context":{}}