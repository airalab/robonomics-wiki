{"hash":"c752e5c48da5b65b0aa4415e850bba1baf527db6","data":{"doc":{"id":"2db61e69a7dd1811a74dadd083be685b","title":"Wie man die Robonomics Collator Node Version aktualisiert","description":"","contributors":["Leemo94"],"headings":[],"subtitles":[{"depth":2,"value":"","anchor":"#erforderliche-befehle"},{"depth":2,"value":"","anchor":"#ändern-der-kusama-relay-chain-datenbank-ohne-festgelegten-basispfad"}],"content":"\nEs wird empfohlen, vor dem Lesen dieses Beitrags die folgenden Artikel gelesen zu haben: [\"Wie man Collator Node erstellt\"](/docs/how-to-build-collator-node) & [\"Wie man den Robonomics Collator startet\"](/docs/how-to-launch-the-robonomics-collator).\n\nDieser Artikel enthält die Befehle, die zum Aktualisieren einer Robonomics Collator Node (unter Ubuntu) erforderlich sind, und gibt anschließend ein Beispiel.\n\n## **Erforderliche Befehle**\n\n0. Bevor Sie beginnen, wird empfohlen, dass Sie als `root` angemeldet sind. Wenn nicht, empfehle ich Ihnen, folgendes zu verwenden:\n\n<code-helper copy>\n\n```shell\nsudo su -\n```\n\n</code-helper>\n\n1. Stoppen Sie den Robonomics-Dienst:\n\n<code-helper copy>\n\n```shell\nsystemctl stop robonomics.service\n```\n\n</code-helper>\n\n2. Entfernen Sie die vorherige Version von Robonomics (stellen Sie sicher, dass Sie sich im richtigen Verzeichnis befinden):\n\n<code-helper copy>\n\n```shell\nrm -f robonomics.X.X.X-ubuntu-x86_64.tar.gz\n```\n\n</code-helper>\n\n3. Holen Sie sich die [neueste Version](https://github.com/airalab/robonomics/releases) von Robonomics:\n\n<code-helper copy>\n\n```shell\nwget https://github.com/airalab/robonomics/releases/vX.X.X/.....\n```\n</code-helper>\n\n\n4. Extrahieren Sie die Datei:\n\n<code-helper copy>\n\n```shell\ntar -xf robonomics-X.X.X-x86_64-unknown-linux.gnu.tar.gz\n```\n</code-helper>\n\n5. Verschieben Sie die Datei:\n\n<code-helper copy>\n\n```shell\nmv robonomics /usr/local/bin/\n```\n</code-helper>\n\n<robo-wiki-note type=\"note\">\n\nSie müssen diese Datei in das richtige Verzeichnis verschieben, in dem Sie die Robonomics-Node installiert haben)\n\n</robo-wiki-note>\n\n6. Starten Sie Robonomics:\n\n<code-helper copy>\n\n```shell\nsystemctl start robonomics.service\n```\n</code-helper>\n\nBeispiel zum Aktualisieren der Collator Node auf Robonomics v1.8.4:\n\n<code-helper>\n\n```shell\nsudo su -\ncd /home/admin\nsystemctl stop robonomics.service\nrm -f robonomics-1.7.3-x86_64-unknown-linux-gnu.tar.gz\nwget https://github.com/airalab/robonomics/releases/download/v1.8.4/robonomics-1.8.4-x86_64-unknown-linux-gnu.tar.gz\ntar -xf robonomics-1.8.4-x86_64-unknown-linux-gnu.tar.gz\nmv robonomics /usr/local/bin/\nsystemctl start robonomics.service\n\n```\n</code-helper>\n\n## **Ändern der Kusama Relay Chain-Datenbank ohne festgelegten Basispfad**\n\nEs gibt Zeiten, in denen bestimmte Snapshots der Kusama Relay Chain dazu führen, dass Ihre Node Fehler aufweist. Dies führt oft dazu, dass Ihre Node nicht mehr funktioniert. Beispiel für einen Fehler, der durch eine beschädigte Relay Chain-Datenbank verursacht wird:\n\n<code-helper>\n\n```shell\nDec 08 19:14:31 ns3159483 robonomics[1019836]: 2022-12-08 19:14:31 [Relaychain] GRANDPA voter error: could not complete a round on disk: Database\nDec 08 19:14:31 ns3159483 robonomics[1019836]: 2022-12-08 19:14:31 [Relaychain] Essential task `grandpa-voter` failed. Shutting down service.\nDec 08 19:14:32 ns3159483 robonomics[1019836]: Error: Service(Other(\"Essential task failed.\"))\nDec 08 19:14:32 ns3159483 systemd[1]: robonomics.service: Main process exited, code=exited, status=1/FAILURE\nDec 08 19:14:32 ns3159483 systemd[1]: robonomics.service: Failed with result 'exit-code'.\nec 08 19:14:33 ns3159483 robonomics[1022922]: Error: Service(Client(Backend(\"Invalid argument: Column families not opened: col12, col11, col10, col9, col8, col7, col6, col5, col4, col3, col2, col1, col0\")))\nDec 08 19:14:33 ns3159483 systemd[1]: robonomics.service: Main process exited, code=exited, status=1/FAILURE\nDec 08 19:14:33 ns3159483 systemd[1]: robonomics.service: Failed with result 'exit-code'.\n```\n</code-helper>\n\nUm diesen Fehler zu beheben, sollten Sie Ihre vorhandene Kusama Relay Chain-Datenbank (wahrscheinlich RocksDb) entfernen und durch eine andere Db wie ParityDb ersetzen. Führen Sie die folgenden Befehle aus:\n\n1. Finden Sie das Verzeichnis der Robonomics-Node und überprüfen Sie die Dateien:\n\n<code-helper>\n\n```shell\ncd /home/robonomics/\nls -a\n```\n</code-helper>\n\n2. Bestätigen Sie, dass Sie das polkadot-Verzeichnis sehen, und navigieren Sie dann zum chains-Verzeichnis:\n\n<code-helper>\n\n```shell\ncd /polkadot/chains/\nls -a\n```\n</code-helper>\n\n3. Löschen Sie das Verzeichnis `ksmcc3`:\n\n<code-helper copy>\n\n```shell\nrm -r ksmcc3\n```\n</code-helper>\n\n4. Erstellen Sie ein neues `ksmcc3`-Verzeichnis.\n\n<code-helper>\n\n```shell\nmkdir ksmcc3\nchown -R robonomics:robonomics ksmcc3\ncd ksmcc3\n```\n\n</code-helper>\n\n5. Jetzt müssen Sie einen neuen Snapshot herunterladen. In diesem Beispiel wird ein stark beschnittener Relay Chain-Snapshot verwendet, aber Sie können ihn gegen einen beliebigen Snapshot austauschen, den Sie bevorzugen.\n\n<code-helper copy>\n\n```shell\nwget wget https://snaps.sik.rocks/ksm_pruned.tar.gz\n```\n\n</code-helper>\n\n6. Während der Snapshot heruntergeladen wird, öffnen Sie eine neue Sitzung und bearbeiten Sie Ihre Service-Datei:\n\n\n<code-helper copy>\n\n```shell\nsudo nano /etc/systemd/system/robonomics.service\n```\n\n</code-helper>\n\nÄndern Sie Zeilen in der Service-Datei, die sich auf die Datenbank und das Beschneiden beziehen:\n\n<code-helper copy>\n\n```shell\n  --database=paritydb \\\n  --state-pruning=100 \\\n  --blocks-pruning=100 \\\n  --execution=Wasm\n```\n\n</code-helper>\n\n  \nVerwenden Sie `Strg + S` und dann `Strg + X`, um die Service-Datei zu speichern und zu verlassen.\n\n7. Jetzt müssen Sie Ihren Daemon neu laden.\n\n<code-helper copy>\n\n```shell\nsystemctl daemon-reload\n```\n</code-helper>\n\n\n8. Zu diesem Zeitpunkt sollte in Ihrer anderen Sitzung hoffentlich die neue Db heruntergeladen worden sein, also extrahieren Sie die Datei:\n\n<code-helper copy>\n\n```shell\ntar -xvzf ksm_pruned.tar.gz\n```\n\n</code-helper>\n\n9. Nach Abschluss des Entpackens führen Sie Folgendes aus:\n\n<code-helper copy>\n\n\n```shell\nchown -R robonomics:robonomics paritydb\n```\n\n</code-helper>\n\n10. Jetzt können Sie den Dienst starten, ihn auf Fehler überwachen und überprüfen, ob er sowohl mit der Relay Chain als auch mit der Parachain verbunden ist:\n\n\n<code-helper copy>\n\n\n```shell\nsystemctl start robonomics && journalctl -fu robonomics\n```\n</code-helper>","tools":[],"fileInfo":{"path":"de/how-to-update-collator-node-version.md","name":"how-to-update-collator-node-version"}}},"context":{}}