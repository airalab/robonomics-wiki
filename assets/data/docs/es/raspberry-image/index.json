{"hash":"fafc1a72b280365300824608799e28058e0a2c73","data":{"doc":{"id":"2241d7840a25b7abfae563a851fb4d67","title":"Setup with Prepared Image","description":"","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/raspberry-image.0b85c65.5a34c0cc44ec8e63175d9569c93575de.png","size":{"width":1920,"height":1080},"sizes":"(max-width: 1920px) 100vw, 1920px","srcset":["/assets/static/raspberry-image.1b91758.5a34c0cc44ec8e63175d9569c93575de.png 480w","/assets/static/raspberry-image.3df3210.5a34c0cc44ec8e63175d9569c93575de.png 1024w","/assets/static/raspberry-image.0b85c65.5a34c0cc44ec8e63175d9569c93575de.png 1920w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1920 1080' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ead90ca5c9de64fc801cb051dacfed94'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ead90ca5c9de64fc801cb051dacfed94)' width='1920' height='1080' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAYAAAA5DDySAAAACXBIWXMAAAsSAAALEgHS3X78AAADVElEQVRo3u2YWU9TQRTH%2bQhGUR9UBFQExbglPvkdfDQ%2bGNEElVUQZJEIyhIQEERQZAmoRIyoLJUdhLDIoiRK0BjZgoWWLmBLCwUK7d%2bZkUtqsRQjSNU5ycncuXNm2vu7Z%2b6cc%2by2OLmCqr3jXmzcsRvO7keh0WpBxWAwYLXEaDTCFsVuM3lwqk77jywBQGV4RIK%2bgUEMiYfx6XMvxMMjGBz6Aplcgb7%2bAYxIpJDKZOhfsBkSizE2Pr44h46rVGqbhWC3yWEPe/gTJ0/DwfUgHPcd/gFAYdFzBIRGIOdBAc6c90FGVi4iYxMQnZCM%2bFtpuBYTj6vXYxEWFYNHhU9xJzMbxaIKXPAPwo34JCSmpqOt8y1ba35%2b3vYA2O90gYPbIbgfO45tLu5wJDBMAUxoNBiVydkbp29TJpdDrlBCpVZjRCrFV5VqYVwOhXKMjCmg1U5ibGwcStZXQqPR2q4HsP1PIGwknrBh%2by44H/gPvwEUwlZntyXfAPqnqRoMQmtYvGfaNyyocRm1aQ8Q9GcA/nXhADgADoAD4AA4AA7AMgDzQMYUirWgx9I8U7jWfmNdAZiGwjSRoX1Bad88wjONEE3nLaeCLZ1n0WYNI8llAVCZm5uDTqezuICQ4ZlnerOzs2zuSmQlOcdaeYVVAOVVtbiXk4%2bON114TFLj2leN6O0fQGVNHWtflJUjNjEFd7PzkJX3EEm3M9Dd8wGl5ZUsTa6ub0BDUwuaWtvQ/Lodre0drF9ZU8/WLHlZAVFFNYqKS1FB1mxsbkVLG7XrRAuxryHzaQ3iO6h18IC6xib4XA6Bd2AIy/1pjn8pJILVD%2brJWLGoHGe9/JB%2bPxdRcTeZzbOSMhQ8KUJmbj65n4PQyGh4XPSD/5VweAUEwzcoDHFJqazvFxxO7EWISUhmIBNS0uDpG4hz3v6s/nDKw5MBW6t6glUA2slJlvvPzMwwt6a5/rBEiq5379m4Xq/HLFHaTk5NYYqonrg%2btRW2EHXx7p6PkEhH2XYSbKanZ6BWT5B2mt2n6%2bjI9RS5ptWnqtp6Zis8%2bB//BvxuPeBvqCes%2bBg0rwPMm9UGrKlwevyKvXDSGNfrFFiPQMhSHMEjQQ6AA%2bAAOAAOgAPgADgADoAD4AA4gFWUb2b8j7oU121HAAAAAElFTkSuQmCC' /%3e%3c/svg%3e"},"contributors":["LoSk-p","dergudzon","Leemo94"],"translated":false,"headings":[],"subtitles":[{"depth":2,"value":"Image","anchor":"#image"},{"depth":2,"value":"How To Use The Prepared Image","anchor":"#how-to-use-the-prepared-image"}],"content":"## Image\nWe prepared an image to make it easier to use the Home Assistant with Xiaomi Miio and Robonomics with the Raspberry Pi.\n\nYou can get it here: [download image](https://ipfs.io/ipfs/bafybeihzzqoyycflxzxlxy2aplkzxo537ggqatdlbr24b4dnlyrtpkp2eu)\n\nSHA256 checksum: `7ec5ea99d7e339b54cbeaaae58c8295411769d27732ec2b5464dbb495ba24120`\n\nWhat preinstalled in the image:\n- Ubuntu Server 21.10 (3/4/400): 64-bit server OS for arm64 archtectures\n- Python 3.9.7\n- Home Assistant Core 2021.11.5\n- rustc 1.59.0-nightly (efec54529 2021-12-04)\n- substrate-interface 1.1.2\n- python-miio 0.5.8\n\n## How To Use The Prepared Image\nInstall [Raspberry Pi Imager](https://www.raspberrypi.com/software/) on your computer. Insert SD card into your PC and run the Imager program. In `Operating System` select `Use custom` and choose the previously downloaded `.img.gz` file. Then select your SD card in the `Storage` dropdown and click `WRITE`.\n\n![imager](../images/home-assistant/use_custom_image.png)\n![imager](../images/home-assistant/imager_prep.png)\n\nAfter writing is comleted, open the SD card's files on your computer and navigate inside the root folder of the card. The name should be something similar to `system-boot`.\n\nFind the file named `network-config` and open it in a text editor. Write this to the file:\n```\nversion: 2\nethernets:\n  eth0:\n    dhcp4: true\n    optional: true\nwifis:\n  wlan0:\n    dhcp4: true\n    optional: true\n    access-points:\n      \"YOUR_WIFI_NAME\":\n        password: \"YOUR_WIFI_PASSWORD\"\n```\n**Make sure that you input your actual wifi name and your wifi password.** Then you need to save the file, and insert the SD card to the Raspberry Pi and turn it on. It must connect to your wi-fi network, now you need to find its address. Firstly find your address in the local network with:\n\n```bash\nip a\n```\nIt must look like `192.168.xx.xx` or `172.xx.xx.xx`.\n\nThen scan the network with your address and zero in the end:\n\n```bash \n$ sudo nmap -sP 192.168.xx.0/24\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-26 13:50 CEST\nNmap scan report for _gateway (192.168.43.1)\nHost is up (0.015s latency).\nMAC Address: 8E:F5:A3:DB:03:27 (Unknown)\nNmap scan report for ubuntu (192.168.43.56)\nHost is up (0.049s latency).\nMAC Address: DC:A6:32:02:46:50 (Raspberry Pi Trading)\nNmap scan report for LAPTOP-27UBLNO7 (192.168.43.234)\nHost is up (0.00057s latency).\nMAC Address: 7C:B2:7D:9E:95:DA (Intel Corporate)\nNmap scan report for ed-vm (192.168.43.138)\nHost is up.\nNmap done: 256 IP addresses (4 hosts up) scanned in 2.07 seconds\n```\nThere raspberry's address is `192.168.43.56`. Now you can connect to it over ssh:\n```bash\nssh ubuntu@192.168.43.56\n```\nPassword is \"ubuntu\". Then follow the instructions to change the password.\n\nThen you need to write the seed from your Robonomics account to config file. Open it:\n```bash\nsudo -u homeassistant -H -s\nnano /srv/homeassistant/python_scripts/config.config\n```\nAnd add mnemonic:\n```\n[user]\nSEED = <your mnemonic or raw seed>\n```\nThen restart Robonomics Control service:\n```bash\nsystemctl restart robonomics-control@homeassistant.service\n```\n\nAfter that you can connect your devices:\n- [Connection with zigbee2MQTT](/docs/zigbee2-mqtt/)\n- [Connection through Xiaomi Gateway](/docs/xiaomi-gateway/)\n- [Connect Vacuum Cleaner](/docs/vacuum-connect/)\n","tools":[]}},"context":{}}