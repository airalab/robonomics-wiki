{"hash":"f1e68660c08da823a9f47be88ea9d1184e04ebb3","data":{"doc":{"id":"b85c2d4925f11a642d73fca400f1493d","title":"Servicio de Video Robonomics","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[{"depth":2,"value":"Conectar la cámara","anchor":"#conectar-la-cámara"},{"depth":3,"value":"Agregar al tablero","anchor":"#agregar-al-tablero"},{"depth":2,"value":"Verificar la carpeta de medios","anchor":"#verificar-la-carpeta-de-medios"},{"depth":2,"value":"Llamada de servicio","anchor":"#llamada-de-servicio"},{"depth":2,"value":"DAPP","anchor":"#dapp"}],"content":"\nEste artículo muestra cómo agregar una cámara IP a Home Assistant y enviar videos al Servicio Web Robonomics.\n\nPara conectar una cámara a Home Assistant, necesitas conocer su dirección IP y crear una cuenta de cámara local para conectarte al flujo RTSP.\n\n<robo-wiki-note type=\"warning\">\nDado que esto se hace de manera diferente para cada cámara, este proceso no se considera en este artículo.\n</robo-wiki-note>\n\nRequisitos:\n- Cámara IP\n- Cuenta de cámara local configurada\n- Dirección IP de la cámara\n- Home Assistant configurado\n\n<robo-wiki-note type=\"note\">\n\nEste artículo asume que tienes una cámara IP general sin opciones de RTZ (rotar, inclinar, hacer zoom). \nSi tienes una cámara RTZ, consulta el artículo \"Cámara RTZ\" (/docs/ptz-camera). Y luego regresa al segundo paso aquí.\n\n</robo-wiki-note>\n\n## Conectar la cámara\n\nPrimero, necesita encontrar la URL de la transmisión RTSP de la cámara.\nPara hacerlo, intenta ingresar la siguiente consulta en Internet: \"<NOMBRE_DE_LA_CÁMARA> flujo RTSP\".\nLa URL del flujo debe comenzar con `rtsp://<DIRECCIÓN_IP>...`. \n\nEste artículo utiliza una cámara \"Tapo\" y la ruta del flujo es `rtsp://<DIRECCIÓN_IP>/stream1`.\n\nAbre Home Assistant y ve a \"Settings\"-> \"Devices & Services\". Presiona el botón \"ADD INTEGRATION\" y\ncomienza a escribir \"Generic Camera\". Elígelo.\n\n <robo-wiki-picture src=\"home-assistant/generic.jpg\" />\n\nEn la ventana de configuración proporciona la siguiente información:\n- Stream Source URL - La URL del flujo RTSP de la cámara\n- Username - escribe el nombre de usuario de tu cuenta de cámara local\n- Password - escribe una contraseña para tu cuenta de cámara local\n\n<robo-wiki-picture src=\"home-assistant/genericconf.jpg\" />\n\nDesplázate hacia abajo en la configuración y presiona el botón \"Submit\".\n\nEn la ventana de vista previa, activa la casilla \"This image looks good.\" y presiona el botón \"Submit\". Luego - \"Finish\".\n\n<robo-wiki-picture src=\"home-assistant/preview-camera.jpg\" />\n\n### Agregar al tablero\n\nAdemás, puedes agregar el flujo a tu tablero. Para hacer esto, ve al tablero y crea una nueva tarjeta \n\"Picture Glance\". Pasos adicionales:\n- ingresa el \"Títle\" que desees\n- borra los datos de \"Image path\"\n- selecciona la cámara en \"Camera Entity\"\n- en la \"Camera View\", selecciona \"en vivo\" para que haya menos retraso\n\nY guárdalo.\n<robo-wiki-picture src=\"home-assistant/camera_picture_glance.jpg\" />\n\n## Verificar la carpeta de medios\n\nBefore being sent to the Robonomics Video Service, the video must be saved in a folder, and Home Assistant must have access to this folder. \nLa opción más fácil en este caso es usar un paquete de medios, en el cual Home Assistant almacena todos los medios.\n\n- Si usas HAOS o una imagen preinstalada, tu Home Assistant **ya tiene una carpeta de medios**.\n- Si usas Home Assistant Core, debes ir a la carpeta `.homeassistant` y crear la carpeta `media` en ella.\n- Si usas Home Assistant Docker, agrega la línea ` -v /RUTA_A_TU_MEDIA:/media \\` al comando Docker.\n\nPara verificar que todo se configuró correctamente, ve a la pestaña “Media” -> “local media” en tu Home Assistant. \nDeberías ver una carpeta vacía (sin errores):\n\n<robo-wiki-picture src=\"home-assistant/media-folder.jpg\" />\n\n## Llamada de servicio\n\nPara enviar un video a Robonomics, debes llamar a un servicio dedicado en Home Assistant. \nEn este artículo se hace manualmente, pero puedes crear una automatización para ello.\n\nPara hacer esto, ve a \"Developer tools\" -> \"Services\" y busca \"Robonomics: Save recording to Robonomics \".\n\n<robo-wiki-picture src=\"home-assistant/robonomics-service.jpg\" />\n\nEn \"Targets\" elige la entidad de tu cámara.\nEn \"Path to save the recording\" debes proporcionar una ruta absoluta a la carpeta,\ndonde Home Assistant puede guardar el video:\n- Para imagen preinstalada - `/home/homeassistant/.homeassistant/media`;\n- Para HA OS o Home Assistant Docker- `/media`;\n- Para Home Assistant Core - Ruta a la carpeta de medios creada anteriormente.\n\nAdemás, puedes elegir la Duración de la grabación. \n\nCompleta los datos y llama al servicio con el botón \"CALL SERVICE\".\n\n## DAPP\n\nPara ver el video resultante, ve a [Robonomics DAPP](https://vol4tim.github.io/videostream/).\n\n<robo-wiki-picture src=\"home-assistant/video-dapp.jpg\" />\n\nPega la dirección de cuenta de tu controlador y haz clic en el botón de abajo. Espera el proceso de \"Search for Twins\". \nComo resultado, obtendrás un CID de IPFS con todos los videos grabados.\n\n<robo-wiki-picture src=\"home-assistant/video-ipfs.jpg\" />\n\nA continuación, selecciona la cuenta del controlador (u otra) de la lista desplegable y firma un mensaje para autorizar en\nla puerta de enlace Web3 IPFS para descargar todos los videos. Como resultado, obtendrás todos los videos grabados por tu hogar inteligente.\n\n<robo-wiki-picture src=\"home-assistant/show-videos.jpg\" />\n\nDado que todos los videos en la carpeta están encriptados con la clave del controlador, debes insertarla para descifrar los videos.\nDespués de eso, se activa el botón de reproducción de video. Haz clic en él para descargar el video.\n\n<robo-wiki-picture src=\"home-assistant/video-seed.jpg\" />\n\n\n\n\n\n\n","tools":[],"fileInfo":{"path":"es/robonomics-video.md","name":"robonomics-video"}}},"context":{}}