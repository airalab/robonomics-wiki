{"hash":"27d6626b76dcb92dd3ddfe09b4010e2c0ab01932","data":{"doc":{"id":"8418d270c41161bcdfe8a77ed20a76ac","title":"Control de cámara PTZ en Home Assistant","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[{"depth":2,"value":"Integración ONVIF","anchor":"#integración-onvif"},{"depth":2,"value":"Agrega el control de la cámara al panel de control","anchor":"#agrega-el-control-de-la-cámara-al-panel-de-control"},{"depth":2,"value":"Solución de problemas","anchor":"#solución-de-problemas"}],"content":"\nEste artículo cubre un proceso de configuración de una cámara PTZ en Home Assistant. \nSe utilizará el protocolo ONVIF. Esto requiere una cuenta de cámara local.\n\n<robo-wiki-note type=\"warning\">\nEl proceso de configuración de la cuenta de cámara local no se cubre en este artículo.\n</robo-wiki-note>\n\nRequisitos:\n- Cámara PTZ\n- Cuenta de cámara local\n- Dirección IP de la cámara\n- Home Assistant configurado\n\n## Integración ONVIF\n\nComencemos con la instalación de la integración de **ONVIF**. \n\nVe a \"Devices & Services\" en \"Settings\" y presiona el botón \"ADD INTEGRATION\".\nEscribe \"ONVIF\" y elige la integración. Verás la siguiente ventana.\n\n <robo-wiki-picture src=\"home-assistant/onvifsetup.jpg\" />\n\nPresiona el botón \"Submit\". Intentará buscar automáticamente tu cámara. Si tiene éxito, \nelige tu cámara de la lista y completa los campos vacíos. \nDe lo contrario, tendrás que completar todos los campos manualmente. Verás la siguiente ventana.\n\n <robo-wiki-picture src=\"home-assistant/onvifconfig.jpg\" />\n\nCompleta los espacios en blanco:\n- Name - asigna un nombre a tu cámara\n- Host - proporciona la dirección IP de tu cámara\n- Port - generalmente es común que sea 2020, pero tu proveedor de cámaras puede cambiarlo\n- Username - escribe el nombre de usuario de tu cuenta local de la cámara\n  - Password - escribe una contraseña para tu cuenta local de la cámara\n\ny presiona \"Submit\". Elige un área para tu cámara y haz clic en \"Finish\".\n\n## Agrega el control de la cámara al panel de control\n\nAhora que has configurado completamente la cámara, puedes agregar su transmisión y botones de control al panel de control.\n\nVe al panel de control y comienza creando una nueva tarjeta. Elige la opción \"Picture Glance\".\n\n <robo-wiki-picture src=\"home-assistant/glance.jpg\" />\n\nCompleta los datos:\n- Title - elige el título de la imagen de la cámara\n- Camera Entity - elige una entidad de cámara de la lista desplegable\n- Camera View - elige \"live\" para obtener menos retraso\n\nA continuación, cambia al modo \"Code Editor\" presionando el botón en la parte inferior izquierda. Verás el siguiente código:\n```shell\ncamera_view: live\ntype: picture-glance\ntitle: Kitchen\nimage: https://demo.home-assistant.io/stub_config/kitchen.png\nentities: []\ncamera_image: camera.tapo_mainstream\n```\n\nReemplaza el contenido de `entities: []` según el ejemplo a continuación (`<TU_ENTIDAD_DE_CÁMARA>` es lo mismo que el parámetro `camera_image`):\n\n<code-helper copy>\n\n```\nentities:\n  - entity: <YOUR_CAMERA_ENTITY>\n    tap_action:\n      action: call-service\n      service: onvif.ptz\n      service_data:\n        entity_id: <YOUR_CAMERA_ENTITY>\n        pan: LEFT\n        speed: 1\n        distance: 0.3\n        move_mode: ContinuousMove\n    name: Pan Left\n    show_state: false\n    icon: 'mdi:arrow-left'\n    show_icon: true\n  - entity: <YOUR_CAMERA_ENTITY>\n    tap_action:\n      action: call-service\n      service: onvif.ptz\n      service_data:\n        entity_id: <YOUR_CAMERA_ENTITY>\n        tilt: UP\n        speed: 1\n        distance: 0.3\n        move_mode: ContinuousMove\n    name: Tilt Up\n    icon: 'mdi:arrow-up'\n  - entity: <YOUR_CAMERA_ENTITY>\n    tap_action:\n      action: call-service\n      service: onvif.ptz\n      service_data:\n        entity_id: <YOUR_CAMERA_ENTITY>\n        tilt: DOWN\n        speed: 1\n        distance: 0.3\n        move_mode: ContinuousMove\n    name: Tilt Down\n    icon: 'mdi:arrow-down'\n  - entity: <YOUR_CAMERA_ENTITY>\n    tap_action:\n      action: call-service\n      service: onvif.ptz\n      service_data:\n        entity_id: <YOUR_CAMERA_ENTITY>\n        pan: RIGHT\n        speed: 1\n        distance: 0.3\n        move_mode: ContinuousMove\n    name: Pan Right\n    icon: 'mdi:arrow-right'\n    show_icon: true\n```\n\n</code-helper>\n\nEso es todo. Ahora deberías ver la tarjeta de la cámara PTZ en el panel de control junto con los botones de control..\n\n## Solución de problemas\nSi estás utilizando Home Assistant Core y no ves una transmisión de la cámara, debes instalar las integraciones \"stream\" y \"FFMPEG\". \nPara hacer esto, debes agregar las cadenas `stream: ` y `ffmpeg: ` al final de configuration.yaml.","tools":[],"fileInfo":{"path":"es/ptz-camera.md","name":"ptz-camera"}}},"context":{}}