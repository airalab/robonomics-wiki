{"hash":"a2b58b530f9a4cc6b7f00c97a643abd0af484023","data":{"doc":{"id":"a09ba1932974ed77a45f5f86311e91ae","title":"Connect SLS Gateway to Home Assistant","contributors":["LoSk-p"],"translated":false,"headings":[],"subtitles":[{"depth":2,"value":"MQTT Brocker","anchor":"#mqtt-brocker"},{"depth":2,"value":"MQTT Integration","anchor":"#mqtt-integration"},{"depth":2,"value":"MQTT on SLS Gateway","anchor":"#mqtt-on-sls-gateway"}],"content":"\n## MQTT Brocker\n\nFirst, you need to run MQTT brocker on your raspberry with Home Assistant. Connect to it under `ubuntu` login. Then install [Mosquitto Brocker](https://mosquitto.org/):\n\n```bash\nsudo apt update -y && sudo apt install mosquitto mosquitto-clients -y\n```\nConfigure username (you can use any username you want) and password (you will be asked to enter the password after the command):\n```bash\nsudo mosquitto_passwd -c /etc/mosquitto/passwd <username>\n```\nThen edit configuration file:\n```bash\nsudo nano /etc/mosquitto/mosquitto.conf\n```\nAdd the following at the end of the file:\n```\nlistener 1883\nallow_anonymous false\npassword_file /etc/mosquitto/passwd\n```\n\nThen restart the service:\n\n```bash\nsudo systemctl restart mosquitto\n```\n\nAnd check the brocker status:\n```bash\nsystemctl status mosquitto\n```\n\n![mosquitto](../images/home-assistant/mosquitto.png)\n\n## MQTT Integration\n\nThen you need to add MQTT integration to Home Assistant. Open web interface then go to `Configuration/Integrations` page and press `Add Integration` button. Find MQTT:\n\n![mqtt](../images/home-assistant/mqtt.png)\n\nPress on it and set up your brocker with address (localhost), port (1883) and your username and password, then press `submit`:\n\n![mqtt1](../images/home-assistant/mqtt1.png)\n\nThen press on three dots on MQTT integration and choose `System Options`:\n\n![mqtt_options](../images/home-assistant/mqtt_conf.png)\n\nAnd check if automatically adding new devices is enabled:\n\n![mqtt_dev](../images/home-assistant/add_dev.png)\n\n## MQTT on SLS Gateway\n\nAlso you need to configure MQTT on SLS Gateway. On your SLS Gateway go to `Settings/Link` -> `MQTT Setup`:\n\n![sls-mqtt](../images/home-assistant/sls-mqtt.png)\n\nAnd add your brocker address (address of the raspberry with Home Assistant in local network) and port (1883). Also write the topic name (you can choose any). Don't forget to tick `Enable` and `Retain states`:\n\n![sls-mqtt1](../images/home-assistant/sls-mqtt1.png)\n\nSave changes. Now devices will be automatically shown in Home Assistant.\n\nAfter that you can connect your devices to Robonomics with this [instruction](/docs/add-smart-device-to-robonomics)."}},"context":{}}