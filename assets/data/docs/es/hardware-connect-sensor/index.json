{"hash":"feda4ec934d52b6ddee56ffa67b30f8ee1b3f99f","data":{"doc":{"id":"9a3670eb9c42666458e7899b9ed4ee7d","title":"Connect an Air Pollution Sensor","contributors":["ensrationis","akru"],"translated":false,"headings":[],"subtitles":[{"depth":2,"value":"Arduino","anchor":"#arduino"},{"depth":2,"value":"Aira","anchor":"#aira"}],"content":"\nIn this lesson you are going to learn how to connect your sensor to the network and make it publish data. You will see how it is easy to become a member of a global sensor network!\n\nSource code is located [here](https://github.com/airalab/robonomics_tutorials/tree/master/sensor_city).\n\nIn this section we are not going to create a liability contract. Instead we will teach Arduino with sensors to publish the data by a request. All measurements will be published as a Result message.\n\n## Arduino\n\nLet's begin with an Arduino circuit. You need the following components:\n\n* Arduino Uno\n* Optical Dust Sensor Sharp GP2Y1010AU0F\n* Gas Sensor MQ-2\n* Gas Sensor MQ-7\n* Resistor 150 Ohm\n* Capacitor 220 uF\n* Wires\n\nConnect all parts as described below:\n\n<!-- .. image:: ../img/7.png\n  :alt: Arduino schema\n  :align: center -->\n\nA firmware for Arduino Uno is in `sensor_city/scetches` folder. In order to upload it to the board use [Arduino IDE](https://www.arduino.cc/en/Main/Software).\n\n<!-- .. image:: ../img/8.png\n   :alt: Arduino IDE\n   :align: center\n -->\n\n## Aira\n\nThe following steps are performed in Aira client. You can download the latest image from [this page](https://github.com/airalab/aira/releases). It's convenient to [connect via SSH](/docs/aira-connecting-via-ssh/).\n\nAfter you have imported the image to VirtualBox, connect Arduino via USB to your PC and enable serial port forwarding. You should check `Enable Serial Port` and assign `/dev/ttyACM0` in `Path/Address`. Inside the virtual machine `/dev/ttyS0` refers to your external Arduino.\n\n<!-- .. image:: ../img/9.png\n   :alt: Set a port\n   :align: center -->\n\nFinally launch the image and run these command:\n\n```\n$ roslaunch sensor_city publish_data.launch\n```\n\n**Check out the source code to learn how it works under the hood!**\n\nNow Aira patiently waits for a signal to publish the measurements. Go to [Dapp](https://dev.aira.life/smart-city/#/) and click on `Broadcast signal`. You should see the data!"}},"context":{}}