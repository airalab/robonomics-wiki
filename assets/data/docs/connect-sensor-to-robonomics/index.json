{"hash":"7b36d9e87c2c85c3a4883ee5903b2777de09f139","data":{"doc":{"id":"4f565ba14280e5aa68cb159d95879737","title":"Connect Sensor To Robonomics Network","headings":[{"value":"Connect Sensor To Robonomics Network"}],"subtitles":[{"depth":1,"value":"Connect Sensor To Robonomics Network","anchor":"#connect-sensor-to-robonomics-network"},{"depth":2,"value":"Requiremets","anchor":"#requiremets"},{"depth":2,"value":"Assembling","anchor":"#assembling"},{"depth":3,"value":"Connection Diagram","anchor":"#connection-diagram"},{"depth":3,"value":"Connecting SDS011","anchor":"#connecting-sds011"},{"depth":3,"value":"Connecting DHT22","anchor":"#connecting-dht22"},{"depth":3,"value":"Connecting BME280/HTU21D","anchor":"#connecting-bme280htu21d"},{"depth":2,"value":"Device Firmware","anchor":"#device-firmware"},{"depth":3,"value":"For Linux:","anchor":"#for-linux"},{"depth":3,"value":"For Windows:","anchor":"#for-windows"},{"depth":3,"value":"For MacOS","anchor":"#for-macos"},{"depth":2,"value":"Configuration","anchor":"#configuration"},{"depth":2,"value":"Results","anchor":"#results"}],"content":"# Connect Sensor To Robonomics Network\n## Requiremets\n* ESP8266 Node MCU v3\n* particle sensor SDS011\n* micro USB cable\n* connecting wires\n\n## Assembling\n### Connection Diagram\n\n![scheme](./images/sensors-connectivity/schema.jpg)\n\n### Connecting SDS011\n\n* Pin 1 (TX) -> (RX) Pin D1 (GPIO5)\n* Pin 2 (RX) -> (TX) Pin D2 (GPIO4)\n* Pin 3 (GND) -> GND\n* Pin 4 (2.5m) -> unused\n* Pin 5 (5V) -> VU\n* Pin 6 (1m) -> unused\n\nSensor is shipped with a USB adapter and connection wires. You don't need USB adapter, so disconnect wires from it.\n\n![disconnect](./images/sensors-connectivity/2_assembly_usb.jpg)\n\nYou may connect it to ESP via connecting wires \"Female-Male\":\n\n![f-m](./images/sensors-connectivity/3_conn.jpg)\n\nAnd connect them to your ESP according to the connection diagram.\n\nOr you can use wires from USB adapter. Disconnect one wire: push on it with some sharp object and carefully pull the wire:\n\n![extreme_con](./images/sensors-connectivity/4_assembly_wires.jpg)\n\nInsert it to last connector:\n\n![extr](./images/sensors-connectivity/5_wires1.jpg)\n\nThen cut the connector in the middle:\n\n![cut](./images/sensors-connectivity/6_assembly_wires2.jpg)\n\nAnd connect them to ESP according to the diagram:\n\n![esp_con](./images/sensors-connectivity/6_esp_con.jpg)\n\n### Connecting DHT22\n\n\n* Pin 1 => 3V3\n* Pin 2 => Pin D7 (GPIO13)\n* Pin 3 => unused\n* Pin 4 => GND\n\n### Connecting BME280/HTU21D\n\n* VCC -> Pin 3V3\n* GND -> Pin GND\n* SCL -> Pin D4 (GPIO2)\n* SDA -> Pin D3 (GPIO0)\n\n\n## Device Firmware\nDownload `airrohr-flasher` from the [latest release](https://github.com/airalab/sensors-connectivity/releases) for your OS. \nConnect ESP to computer via micro-USB and run flasher. \n\n### For Linux:\nFirstly you need to add the user to `dialout` group:\n```bash\nsudo usermod -a -G dialout $USER\n```\nThen logout and login or restart computer.\n\nNow you can run flasher (don't forget to give it permission to execute):\n```bash\nchmod +x airrohr-flasher-linux\n./airrohr-flasher-linux\n```\n\n### For Windows:\nUnpack flasher and run it with double click.\nYou need to install drivers for the USB2serial chipset (Windows 10 should be able to automatically download these):\n\n* Drivers for NodeMCU v3 (CH340): [Windows](http://www.wch.cn/downloads/file/5.html) ([2018/09/04 v3.4 mirror](https://d.inf.re/luftdaten/CH341SER.ZIP))\n\n\n### For MacOS\nDownload flasher and run it.\nYou need to install drivers for the USB2serial chipset: \n* Drivers for NodeMCU v3 (CH340): [MacOS](http://www.wch.cn/downloads/file/178.html) ([2018/09/04 v1.4 mirror](https://d.inf.re/luftdaten/CH341SER_MAC.ZIP))\n\n\nChoose firmware (English or Russian) and press upload. It will take a few minutes.\n\n![flasher](./images/sensors-connectivity/7_flasher.jpg)\n\n\n## Configuration\nReboot your ESP (simply reconnect USB to computer).\nThen connect to airRohr--xxxxxxx Wi-Fi network and in your browser write address 192.168.4.1:\n\n![menu](./images/sensors-connectivity/8_menu1.jpg)\n\nGo to Configuration -> Wi-Fi Settings and add the information about your Wi-Fi network:\n\n![config](./images/sensors-connectivity/9_W-fi.jpg)\n\nThen press \"Save configuration and restart\" and ESP will be connected to the provided Wi-Fi network.\n\n![save](./images/sensors-connectivity/10_save.jpg)\n\n\nThen find ESP in local network (for that your computer and ESP must be in one network). You can do it using airrohr-flasher. Run it, go to the Discovery tab and press Refresh, then you'll be able to see the address.\n\n![addr](./images/sensors-connectivity/11_flaser2.jpg)\n\n\n\nOpen ESP local address in your browser, go to `APIs` tab in  `Configuration` and click `Robonomics`. \n\n![robonomics](./images/sensors-connectivity/12_APIrobonomics.jpg)\n\n> If you want to send data to your own server, enable `Custom API` and write your address and port \n\nThen go to `Sensors` tab, enable GPS and put in your coordinates. Also enable the sensors you connected:\n\n![gps](./images/sensors-connectivity/13_gps.jpg)\n\nThen press `Save configuration and restart`.\n\n\n\n## Results\nGo to [sensors.robonomics.network](https://sensors.robonomics.network/#/), and you will see your sensor on the map.\n\n![map](./images/sensors-connectivity/14_map.jpg)\n"}},"context":{}}