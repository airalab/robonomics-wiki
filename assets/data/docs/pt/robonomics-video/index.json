{"hash":"8c97e94672e2f65db3959c4ea30cc2599941a27c","data":{"doc":{"id":"0434fc8e1cde1332476d59a7ae74d445","title":"Serviço de Vídeo Robonomics","description":"","contributors":["nakata5321"],"headings":[],"subtitles":[{"depth":2,"value":"Conecte a Câmera","anchor":"#conecte-a-câmera"},{"depth":3,"value":"Adicionar ao Painel","anchor":"#adicionar-ao-painel"},{"depth":2,"value":"Verifique a pasta de mídia","anchor":"#verifique-a-pasta-de-mídia"},{"depth":2,"value":"Chamada de Serviço","anchor":"#chamada-de-serviço"},{"depth":2,"value":"DAPP","anchor":"#dapp"}],"content":"\nEste artigo mostra como adicionar uma câmera IP ao Home Assistant e enviar vídeos para o Serviço Web Robonomics.\n\nPara conectar uma câmera ao Home Assistant, você precisa saber o seu endereço IP e criar uma conta de câmera local para se conectar ao fluxo RTSP.\n\n<robo-wiki-note type=\"warning\">\nComo isso é feito de forma diferente para cada câmera, esse processo não é considerado neste artigo.\n</robo-wiki-note>\n\nRequisitos:\n- Câmera IP\n- Conta de câmera local configurada\n- Endereço IP da câmera\n- Home Assistant configurado\n\n<robo-wiki-note type=\"note\">\n\nEste artigo pressupõe que você tenha uma câmera IP geral sem opções de rotação, inclinação e zoom (RTZ). \nSe você tiver uma câmera RTZ, verifique o artigo \"Câmera RTZ\" (/docs/ptz-camera). E então volte para a segunda etapa aqui.\n\n</robo-wiki-note>\n\n## Conecte a Câmera\n\nPrimeiro, você precisa descobrir o URL do fluxo RTSP da câmera. \nPara fazer isso, tente inserir a seguinte consulta na Internet: \"<NOME_DA_CÂMERA> fluxo RTSP\".\nA URL do fluxo deve começar com `rtsp://<ENDEREÇO_IP>...`. \n\nEste artigo usa uma câmera \"Tapo\" e o caminho do fluxo é `rtsp://<ENDEREÇO_IP>/stream1`.\n\nAbra o Home Assistant e vá para \"Settings\"-> \"Devices & Services\". Pressione o botão \"ADD INTEGRATION\" e\ncomece a digitar \"Generic Camera\". Escolha-a.\n\n <robo-wiki-picture src=\"home-assistant/generic.jpg\" />\n\nNa janela de configuração, forneça as seguintes informações:\n- Stream Source URL - A URL do fluxo RTSP da câmera\n- Username - escreva o nome de usuário da sua conta de câmera local\n- Password - escreva uma senha para sua conta de câmera local\n\n<robo-wiki-picture src=\"home-assistant/genericconf.jpg\" />\n\nRole para baixo nas configurações e pressione o botão \"Submit\".\n\nNa janela de visualização, ative a caixa de seleção \"This image looks good.\" e pressione o botão \"Submit\". Em seguida, - \"Finish\".\n\n<robo-wiki-picture src=\"home-assistant/preview-camera.jpg\" />\n\n### Adicionar ao Painel\n\nAlém disso, você pode adicionar o fluxo ao seu painel. Para fazer isso, vá para o painel e crie um novo cartão \n\"Picture Glance\". Etapas adicionais:\n- insira o \"Títle\" desejado\n- exclua os dados do \"Image Path\"\n- selecione a câmera em \"Camera Entity\"\n- na \"Camera View\", selecione \"live\" para que haja menos atraso\n\nE salve.\n<robo-wiki-picture src=\"home-assistant/camera_picture_glance.jpg\" />\n\n## Verifique a pasta de mídia\n\nAntes de ser enviado ao Robonomics Video Service, o vídeo deve ser salvo em uma pasta, e o Home Assistant deve ter acesso a esta pasta.\nA opção mais fácil nesse caso é usar um pacote de mídia, no qual o Home Assistant armazena todas as mídias.\n\n- Se você estiver usando HAOS ou uma Imagem Pré-instalada, seu Home Assistant **já possui uma pasta de mídia**.\n- Se você estiver usando o Home Assistant Core, você deve ir para a pasta `.homeassistant` e criar a pasta `media` dentro dela.\n- Se você estiver usando o Home Assistant Docker, adicione a linha ` -v /CAMINHO_PARA_SUA_MÍDIA:/media \\` ao comando Docker.\n\nPara verificar se tudo foi configurado corretamente, vá para a guia “Media” -> “local media” no seu Home Assistant. \nVocê deve ver uma pasta vazia (sem erros):\n\n<robo-wiki-picture src=\"home-assistant/media-folder.jpg\" />\n\n## Chamada de Serviço\n\nPara enviar um vídeo para a Robonomics, você deve chamar um serviço dedicado no Home Assistant. \nNeste artigo, isso é feito manualmente, mas você pode criar uma automação para isso.\n\nPara fazer isso, vá para \"Developer tools\" -> \"Services\" e encontre \"Robonomics: Save recording to Robonomics \".\n\n<robo-wiki-picture src=\"home-assistant/robonomics-service.jpg\" />\n\nEm \"Targets\", escolha a entidade da sua câmera.\nEm \"Path to save the recording\", você deve fornecer um caminho absoluto para a pasta,\nonde o Home Assistant pode salvar o vídeo:\n- Para Imagem Pré-instalada - `/home/homeassistant/.homeassistant/media`;\n- Para HA OS ou Home Assistant Docker- `/media`;\n- Para Home Assistant Core - Caminho para a pasta de mídia criada anteriormente.\n\nAlém disso, você pode escolher a Duração da gravação. \n\nPreencha os dados e chame o serviço com o botão\"CALL SERVICE\".\n\n## DAPP\n\nPara visualizar o vídeo resultante, vá para [Robonomics DAPP](https://vol4tim.github.io/videostream/).\n\n<robo-wiki-picture src=\"home-assistant/video-dapp.jpg\" />\n\nCole o endereço da sua conta do controlador e clique no botão abaixo. Aguarde o processo de \"\"Search for Twins\".\nComo resultado, você obterá um CID do IPFS com todos os vídeos gravados.\n\n<robo-wiki-picture src=\"home-assistant/video-ipfs.jpg\" />\n\nEm seguida, selecione a conta do controlador (ou qualquer outra) na lista suspensa e assine uma mensagem para autorização no\ngateway Web3 IPFS para baixar todos os vídeos. Como resultado, você obterá todos os vídeos gravados pela sua casa inteligente.\n\n<robo-wiki-picture src=\"home-assistant/show-videos.jpg\" />\n\nComo todos os vídeos na pasta esto criptografados com a chave do controlador, você precisa inseri-la para descriptografar os vídeos.\nDepois disso, o botão de reprodução do vídeo é ativado. Clique nele para baixar o vídeo.\n\n<robo-wiki-picture src=\"home-assistant/video-seed.jpg\" />\n\n\n\n\n\n\n","tools":[],"fileInfo":{"path":"pt/robonomics-video.md","name":"robonomics-video"}}},"context":{}}